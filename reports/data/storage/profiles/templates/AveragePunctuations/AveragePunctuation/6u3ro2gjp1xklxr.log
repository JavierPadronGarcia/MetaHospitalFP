{"type":"operationStart","subtype":"profile","data":{"_id":"2erdgKTXI5d3XGwl","timestamp":"2024-02-15T22:51:04.682Z","state":"queued","mode":"standard","creationDate":"2024-02-15T22:51:04.690Z","modificationDate":"2024-02-15T22:51:04.690Z","shortid":"mJtZTK6","$entitySet":"profiles"},"doDiffs":false,"timestamp":1708037464685,"id":"hg4hhxe05mnug5y","previousOperationId":null,"operationId":"ig7juljqlhpijr3"}
{"type":"log","level":"info","message":"Render request 4 queued for execution and waiting for available worker","previousOperationId":"ig7juljqlhpijr3","timestamp":1708037464688,"id":"qi5r2hzulqmpoxm"}
{"type":"operationStart","subtype":"render","name":"AveragePunctuation","previousOperationId":"ig7juljqlhpijr3","timestamp":1708037464756,"id":"kmqf4omolmmk07d","previousEventId":"hg4hhxe05mnug5y","operationId":"e240ot7fhogq5ex"}
{"type":"log","timestamp":1708037464762,"level":"info","message":"Starting rendering request 4","meta":{"rootId":"6u3ro2gjp1xklxr","id":"6u3ro2gjp1xklxr"},"id":"svgy51kvnmv82jx","previousOperationId":"e240ot7fhogq5ex"}
{"type":"log","timestamp":1708037464765,"level":"info","message":"Rendering template { name: AveragePunctuation, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"6u3ro2gjp1xklxr","id":"6u3ro2gjp1xklxr"},"id":"qsf92qzqp7p57n1","previousOperationId":"e240ot7fhogq5ex"}
{"type":"log","timestamp":1708037464771,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"6u3ro2gjp1xklxr","id":"6u3ro2gjp1xklxr"},"id":"shjg7iubwz464xi","previousOperationId":"e240ot7fhogq5ex"}
{"type":"log","timestamp":1708037464783,"level":"debug","message":"Executing script AveragePunctuation-script (beforeRender)","meta":{"rootId":"6u3ro2gjp1xklxr","id":"6u3ro2gjp1xklxr"},"id":"4490z7pqnxr4fur","previousOperationId":"e240ot7fhogq5ex"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1708037464941,"id":"fdjiiupe3w56llj","previousEventId":"kmqf4omolmmk07d","operationId":"32pndutl3i9gas2","previousOperationId":"e240ot7fhogq5ex"}
{"type":"operationStart","subtype":"script","name":"scripts AveragePunctuation-script","previousOperationId":"32pndutl3i9gas2","timestamp":1708037464941,"id":"nyf8v2fgvlxe38k","previousEventId":"fdjiiupe3w56llj","operationId":"81vod04eamir8ub"}
{"type":"log","timestamp":1708037464952,"level":"warn","message":"Error when processing render request 4\n(because) error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nCannot destructure property 'groupId' of 'params' as it is undefined.\n\n(sandbox.js line 17:16)\n\n  15 | async function fetchUserActivities(token, params) {\n  16 |     return new Promise((resolve, reject) => {\n> 17 |         const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n     |                ^\n  18 |\n  19 |         // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n  20 |         axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/1/3/1/1/2024-02-15`,\n\n(sandbox.js line 16:12)\n\n  14 |\n  15 | async function fetchUserActivities(token, params) {\n> 16 |     return new Promise((resolve, reject) => {\n     |            ^\n  17 |         const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n  18 |\n  19 |         // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n\n(sandbox.js line 32:37)\n\n  30 |     const token = req.data.token;\n  31 |     req.data.user = jwt.decode(token);\n> 32 |     req.data.userActivities = await fetchUserActivities(token, req.data.params);\n     |                                     ^\n  33 | }\n\n(sandbox.js line 45:18)\nTypeError: Cannot destructure property 'groupId' of 'params' as it is undefined.\n    at sandbox.js:17:16\n    at new Promise (<anonymous>)\n    at fetchUserActivities (sandbox.js:16:12)\n    at Object.beforeRender (sandbox.js:32:37)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:35)\n    at sandbox.js:45:18\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)","meta":{"rootId":"6u3ro2gjp1xklxr","id":"6u3ro2gjp1xklxr"},"id":"mo9a1r9k92zz6vp","previousOperationId":"81vod04eamir8ub"}
{"type":"log","timestamp":1708037464953,"level":"warn","message":"Rendering request 4 finished with error in 272 ms","meta":{"rootId":"6u3ro2gjp1xklxr","id":"6u3ro2gjp1xklxr"},"id":"gbv7syuz5ksk08v","previousOperationId":"81vod04eamir8ub"}
{"type":"error","timestamp":1708037464961,"statusCode":400,"weak":true,"lineNumber":17,"decoratedSuffix":"\n\n(sandbox.js line 17:16)\n\n  15 | async function fetchUserActivities(token, params) {\n  16 |     return new Promise((resolve, reject) => {\n> 17 |         const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n     |                ^\n  18 |\n  19 |         // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n  20 |         axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/1/3/1/1/2024-02-15`,\n\n(sandbox.js line 16:12)\n\n  14 |\n  15 | async function fetchUserActivities(token, params) {\n> 16 |     return new Promise((resolve, reject) => {\n     |            ^\n  17 |         const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n  18 |\n  19 |         // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n\n(sandbox.js line 32:37)\n\n  30 |     const token = req.data.token;\n  31 |     req.data.user = jwt.decode(token);\n> 32 |     req.data.userActivities = await fetchUserActivities(token, req.data.params);\n     |                                     ^\n  33 | }\n\n(sandbox.js line 45:18)","entity":{"shortid":"LWX1OfaBwy","name":"AveragePunctuation-script","content":"const axios = require('axios');\nconst jwt = require('jsonwebtoken');\n\nfunction getOptions(token) {\n    let bearerAccess = 'Bearer ' + token;\n\n    let options = {\n        headers: {\n            'Authorization': bearerAccess,\n        }\n    }\n    return options;\n}\n\nasync function fetchUserActivities(token, params) {\n    return new Promise((resolve, reject) => {\n        const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n\n        // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n        axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/1/3/1/1/2024-02-15`,\n            getOptions(token)).then(response => {\n            resolve(response.data)\n        }).catch(err => {\n            reject(err.message);\n        })\n    })\n}\n\nasync function beforeRender(req, res) {\n    const token = req.data.token;\n    req.data.user = jwt.decode(token);\n    req.data.userActivities = await fetchUserActivities(token, req.data.params);\n}"},"property":"content","logged":true,"previousOperationId":"81vod04eamir8ub","id":"qffwfyqlps31n1u","stack":"TypeError: Cannot destructure property 'groupId' of 'params' as it is undefined.\n    at sandbox.js:17:16\n    at new Promise (<anonymous>)\n    at fetchUserActivities (sandbox.js:16:12)\n    at Object.beforeRender (sandbox.js:32:37)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:35)\n    at sandbox.js:45:18\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)","message":"Error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nCannot destructure property 'groupId' of 'params' as it is undefined.\n\n(sandbox.js line 17:16)\n\n  15 | async function fetchUserActivities(token, params) {\n  16 |     return new Promise((resolve, reject) => {\n> 17 |         const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n     |                ^\n  18 |\n  19 |         // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n  20 |         axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/1/3/1/1/2024-02-15`,\n\n(sandbox.js line 16:12)\n\n  14 |\n  15 | async function fetchUserActivities(token, params) {\n> 16 |     return new Promise((resolve, reject) => {\n     |            ^\n  17 |         const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n  18 |\n  19 |         // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n\n(sandbox.js line 32:37)\n\n  30 |     const token = req.data.token;\n  31 |     req.data.user = jwt.decode(token);\n> 32 |     req.data.userActivities = await fetchUserActivities(token, req.data.params);\n     |                                     ^\n  33 | }\n\n(sandbox.js line 45:18)"}
