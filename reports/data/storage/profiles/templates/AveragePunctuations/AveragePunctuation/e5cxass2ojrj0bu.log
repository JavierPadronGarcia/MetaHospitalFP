{"type":"operationStart","subtype":"profile","data":{"_id":"cDLAlLungc6sd0TO","timestamp":"2024-02-15T22:54:42.821Z","state":"queued","mode":"standard","creationDate":"2024-02-15T22:54:42.829Z","modificationDate":"2024-02-15T22:54:42.829Z","shortid":"KZQQDum","$entitySet":"profiles"},"doDiffs":false,"timestamp":1708037682827,"id":"vv71gwgqppnjroq","previousOperationId":null,"operationId":"4blu4zupy0wn8pd"}
{"type":"log","level":"info","message":"Render request 7 queued for execution and waiting for available worker","previousOperationId":"4blu4zupy0wn8pd","timestamp":1708037682827,"id":"gue9242i31ocue3"}
{"type":"operationStart","subtype":"render","name":"AveragePunctuation","previousOperationId":"4blu4zupy0wn8pd","timestamp":1708037682860,"id":"ukp7qb7786dbe0z","previousEventId":"vv71gwgqppnjroq","operationId":"8wl2ec3tgf1abkj"}
{"type":"log","timestamp":1708037682861,"level":"info","message":"Starting rendering request 7","meta":{"rootId":"e5cxass2ojrj0bu","id":"e5cxass2ojrj0bu"},"id":"we543r8s9b2phue","previousOperationId":"8wl2ec3tgf1abkj"}
{"type":"log","timestamp":1708037682862,"level":"info","message":"Rendering template { name: AveragePunctuation, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"e5cxass2ojrj0bu","id":"e5cxass2ojrj0bu"},"id":"g5bi3j1ijzjnwwg","previousOperationId":"8wl2ec3tgf1abkj"}
{"type":"log","timestamp":1708037682879,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"e5cxass2ojrj0bu","id":"e5cxass2ojrj0bu"},"id":"tkfs1un9ewtz9vh","previousOperationId":"8wl2ec3tgf1abkj"}
{"type":"log","timestamp":1708037682885,"level":"debug","message":"Executing script AveragePunctuation-script (beforeRender)","meta":{"rootId":"e5cxass2ojrj0bu","id":"e5cxass2ojrj0bu"},"id":"u06tjqsogm5tm3k","previousOperationId":"8wl2ec3tgf1abkj"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1708037682924,"id":"p5rqfrtlxc23g4g","previousEventId":"ukp7qb7786dbe0z","operationId":"x65edp63w1thf1c","previousOperationId":"8wl2ec3tgf1abkj"}
{"type":"operationStart","subtype":"script","name":"scripts AveragePunctuation-script","previousOperationId":"x65edp63w1thf1c","timestamp":1708037682924,"id":"bs2ljmdirnon1rn","previousEventId":"p5rqfrtlxc23g4g","operationId":"i86ppp7ajgamw32"}
{"type":"log","timestamp":1708037682963,"level":"warn","message":"Error when processing render request 7\n(because) error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nRequest failed with status code 500\nError: Request failed with status code 500\n    at normalizeError (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\normalizeError.js:24:18)\n    at handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:207:18)\n    at context.__handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:33:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)\n    at async ListenerCollection.fire (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\listenerCollection.js:157:21)","meta":{"rootId":"e5cxass2ojrj0bu","id":"e5cxass2ojrj0bu"},"id":"534s3onpr8ijwia","previousOperationId":"i86ppp7ajgamw32"}
{"type":"log","timestamp":1708037682963,"level":"warn","message":"Rendering request 7 finished with error in 143 ms","meta":{"rootId":"e5cxass2ojrj0bu","id":"e5cxass2ojrj0bu"},"id":"wbwv5cbcfuay1m0","previousOperationId":"i86ppp7ajgamw32"}
{"type":"error","timestamp":1708037682969,"statusCode":400,"weak":true,"entity":{"shortid":"LWX1OfaBwy","name":"AveragePunctuation-script","content":"const axios = require('axios');\nconst jwt = require('jsonwebtoken');\n\nfunction getOptions(token) {\n    let bearerAccess = 'Bearer ' + token;\n\n    let options = {\n        headers: {\n            'Authorization': bearerAccess,\n        }\n    }\n    return options;\n}\n\nasync function fetchUserActivities(token, params) {\n    return new Promise((resolve, reject) => {\n        // const {groupId, workUnitId, caseId, assigned, finishDate} = params;\n\n        // axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/${groupId}/${workUnitId}/${caseId}/${assigned}/${finishDate}`,\n        axios.get(`http://localhost:12080/api/exercises/studentsAssignedToExerciseWithDetails/1/3/1/1/2024-02-15`,\n            getOptions('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwidXNlcm5hbWUiOiJoZXJuYW52YWxkZXNkZWFuZGFAbWV0YWhvc3BpdGFsLmNvbSIsInBhc3N3b3JkIjoiJDJhJDEwJEJJaVc0T0lpNVF4ZzF0RUt2dUtBTC40SXd5ajZsTmYuOS5tQlJpemVQTVpTNDJRYzMzL04yIiwicm9sZSI6InRlYWNoZXIiLCJpYXQiOjE3MDgwMzY4NDgsImV4cCI6MTcwODEyMzI0OH0.fCx11L3X_82gmaaCjroR47fBLscxfpYyl8RONGncN_4')).then(response => {\n            resolve(response.data)\n        }).catch(err => {\n            reject(err.message);\n        })\n    })\n}\n\nasync function beforeRender(req, res) {\n    const token = req.data.token;\n    req.data.user = jwt.decode(token);\n    req.data.userActivities = await fetchUserActivities(token, req.data.params);\n}"},"property":"content","logged":true,"previousOperationId":"i86ppp7ajgamw32","id":"u2dovuelaasri30","stack":"Error: Request failed with status code 500\n    at normalizeError (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\normalizeError.js:24:18)\n    at handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:207:18)\n    at context.__handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:33:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)\n    at async ListenerCollection.fire (C:\\Users\\Javier\\Desktop\\Proyecto\\ProyectoConjunto\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\listenerCollection.js:157:21)","message":"Error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nRequest failed with status code 500"}
