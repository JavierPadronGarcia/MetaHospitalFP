{"version":3,"file":"main.js","mappings":"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","sources":["webpack://@jsreport/jsreport-licensing/external var \"Studio\"","webpack://@jsreport/jsreport-licensing/./studio/style.css?e6d9","webpack://@jsreport/jsreport-licensing/webpack/bootstrap","webpack://@jsreport/jsreport-licensing/webpack/runtime/compat get default export","webpack://@jsreport/jsreport-licensing/webpack/runtime/define property getters","webpack://@jsreport/jsreport-licensing/webpack/runtime/hasOwnProperty shorthand","webpack://@jsreport/jsreport-licensing/webpack/runtime/make namespace object","webpack://@jsreport/jsreport-licensing/./studio/main_dev.js"],"sourcesContent":["module.exports = Studio;","// extracted by mini-css-extract-plugin\nexport default {\"developmentLicense\":\"x-licensing-style-developmentLicense\"};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Studio from 'jsreport-studio'\nimport Style from './style.css'\n\nfunction renderLicenseType (licensingInfo) {\n  if (licensingInfo.unreachable) {\n    return (\n      <p>\n        The licensing server was not reachable during the instance startup. The instance now runs in the enterprise mode and the license validation will be performed again during the next restart.\n      </p>\n    )\n  }\n\n  if (licensingInfo.type === 'subscription') {\n    if (licensingInfo.pendingExpiration === true) {\n      return (\n        <div>\n          <p>\n            The subscription is no longer active probably due to failed payment or cancellation. The subscription can be used for maximum one month in inactive state.\n          </p>\n          <PaymentNote paymentType={licensingInfo.paymentType} />\n        </div>\n      )\n    }\n\n    return (\n      <div>\n        <p>\n          The subscription renewal is planned on {licensingInfo.expiresOn.toLocaleDateString()} and the license will be again validated afterwards.\n        </p>\n        <PaymentNote paymentType={licensingInfo.paymentType} />\n      </div>\n    )\n  }\n\n  if (licensingInfo.type === 'perpetual') {\n    return (\n      <p>\n        Perpetual license is validated for the version {licensingInfo.validatedForVersion} with free upgrades to the versions released before {licensingInfo.expiresOn.toLocaleDateString()}.\n        The license will be remotely validated again if the instance is upgraded to a different version.\n      </p>\n    )\n  }\n\n  if (licensingInfo.type === 'trial') {\n    return (\n      <p>\n        The trial license expires on {licensingInfo.expiresOn.toLocaleDateString()}.\n        You will need to purchase enterprise license to be able to store more than 5 templates afterwards.\n      </p>\n    )\n  }\n\n  if (licensingInfo.type === 'free') {\n    return <p>You can use up to 5 templates for free.</p>\n  }\n}\n\nfunction PaymentNote ({ paymentType }) {\n  if (paymentType === 'gumroad') {\n    return (\n      <p>\n        You can find further information about payments in the <a href='https://gumroad.com/library' target='_blank' rel='noreferrer'>gumroad library</a>.`\n      </p>\n    )\n  }\n\n  if (paymentType === 'manual') {\n    return (\n      <p>\n        The license is payed through manual invoices and bank transfers. Please contact <a href='mailto: support@jsreport.net'>support@jsreport.net</a> to get further information.\n      </p>\n    )\n  }\n\n  if (paymentType === 'braintree') {\n    return (\n      <p>\n        You can find further information about payments in the <a href='https://jsreport.net/payments/customer' target='_blank' rel='noreferrer'>customer portal</a>.\n      </p>\n    )\n  }\n\n  return <span />\n}\n\nStudio.readyListeners.push(async () => {\n  const licensingInfo = Studio.extensions.licensing.options\n  if (licensingInfo.development) {\n    Studio.addStartupComponent((props) => (\n      <div className={Style.developmentLicense}>\n        Development only license applied\n      </div>\n    ))\n  }\n\n  if (licensingInfo.usageCheckFailureInfo) {\n    Studio.openModal(() => (\n      <div>\n        <p>\n          {licensingInfo.usageCheckFailureInfo.message}\n        </p>\n\n        <p>\n          The development instances should use config license.development=true and every production instance should have its own enterprise license key. The deployment with several production jsreport instances should use enterprise scale license which doesn't limit the license key usage.\n        </p>\n      </div>\n    ))\n  }\n\n  const trialModal = () => Studio.openModal(() => (\n    <div>\n      <p>\n        Free license is limited to maximum 5 templates.\n        Your jsreport instance is now running in one month trial. Please buy\n        the enterprise license if you want to continue using jsreport after the trial expires.\n      </p>\n\n      <p>\n        The instructions for buying enterprise license can be found <a href='http://jsreport.net/buy' target='_blank' rel='noreferrer'>here</a>.\n      </p>\n    </div>\n  ))\n\n  const licenseInfoModal = () => Studio.openModal(() => (\n    <div>\n      <h2>\n        {licensingInfo.license} license\n        {licensingInfo.development ? ' (development)' : ''}\n      </h2>\n      {renderLicenseType(licensingInfo)}\n      <p>More information about licensing and pricing can be found <a href='http://jsreport.net/buy' target='_blank' rel='noreferrer'>here</a>.</p>\n    </div>\n  ))\n\n  const pendingExpirationModal = () => Studio.openModal(() => (\n    <div>\n      <h2>subscription has expired</h2>\n      <p>\n        The subscription is no longer active probably due to failed payment or cancellation.\n        The subscription can be used for maximum one month in inactive state.\n      </p>\n      <PaymentNote paymentType={licensingInfo.paymentType} />\n    </div>\n  ))\n\n  if (licensingInfo.type === 'trial' && Studio.getAllEntities().filter((e) => e.__entitySet === 'templates' && !e.__isNew).length > 5) {\n    trialModal()\n  }\n\n  if (licensingInfo.type === 'subscription' && licensingInfo.pendingExpiration === true) {\n    pendingExpirationModal()\n  }\n\n  if (licensingInfo.license === 'free') {\n    const interval = setInterval(() => {\n      if (Studio.getAllEntities().filter((e) => e.__entitySet === 'templates' && !e.__isNew).length > 5) {\n        clearInterval(interval)\n        trialModal()\n        licensingInfo.type = licensingInfo.license = 'trial'\n        const now = new Date()\n        now.setDate(now.getDate() + 30)\n        licensingInfo.expiresOn = now\n        Studio.api.post('/api/licensing/trial', {}).then(m => {\n          if (m.status === 1) {\n            setTimeout(() => Studio.openModal(() => <div>{m.message}</div>), 5000)\n          }\n        })\n      }\n    }, 10000)\n  }\n\n  Studio.addToolbarComponent((props) => (\n    <div\n      className='toolbar-button'\n      onClick={() => {\n        licenseInfoModal()\n        props.closeMenu()\n      }}\n    >\n      <div style={{ textTransform: 'capitalize' }}>\n        <i className='fa fa-gavel' />{licensingInfo.license} <i className='fa fa-info-circle' style={{ marginRight: 0 }} />\n      </div>\n    </div>\n  ), 'settings')\n})\n"],"names":["Studio","Style","renderLicenseType","licensingInfo","unreachable","React","createElement","type","pendingExpiration","PaymentNote","paymentType","expiresOn","toLocaleDateString","validatedForVersion","_ref","href","target","rel","readyListeners","push","extensions","licensing","options","development","addStartupComponent","props","className","developmentLicense","usageCheckFailureInfo","openModal","message","trialModal","licenseInfoModal","license","pendingExpirationModal","getAllEntities","filter","e","__entitySet","__isNew","length","interval","setInterval","clearInterval","now","Date","setDate","getDate","api","post","then","m","status","setTimeout","addToolbarComponent","onClick","closeMenu","style","textTransform","marginRight"],"sourceRoot":""}