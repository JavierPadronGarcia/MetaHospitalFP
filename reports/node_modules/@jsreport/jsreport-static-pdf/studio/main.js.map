{"version":3,"file":"main.js","mappings":"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","sources":["webpack://@jsreport/jsreport-static-pdf/external var \"Studio\"","webpack://@jsreport/jsreport-static-pdf/./studio/StaticPdfTemplateProperties.js","webpack://@jsreport/jsreport-static-pdf/external var \"Studio.runtime['helpers/extends']\"","webpack://@jsreport/jsreport-static-pdf/external var \"Studio.libraries['react']\"","webpack://@jsreport/jsreport-static-pdf/webpack/bootstrap","webpack://@jsreport/jsreport-static-pdf/webpack/runtime/compat get default export","webpack://@jsreport/jsreport-static-pdf/webpack/runtime/define property getters","webpack://@jsreport/jsreport-static-pdf/webpack/runtime/hasOwnProperty shorthand","webpack://@jsreport/jsreport-static-pdf/webpack/runtime/make namespace object","webpack://@jsreport/jsreport-static-pdf/./studio/main_dev.js"],"sourcesContent":["module.exports = Studio;","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst EntityRefSelect = Studio.EntityRefSelect\nconst sharedComponents = Studio.sharedComponents\n\nclass StaticPdfTemplateProperties extends Component {\n  static title (entity, entities) {\n    if (!entity.staticPdf || !entity.staticPdf.pdfAssetShortid) {\n      return 'static pdf'\n    }\n\n    const foundItems = StaticPdfTemplateProperties.selectAssets(entities).filter(\n      (e) => entity.staticPdf.pdfAssetShortid === e.shortid\n    )\n\n    if (!foundItems.length) {\n      return 'static pdf'\n    }\n\n    return `static pdf: ${foundItems[0].name}`\n  }\n\n  static selectAssets (entities) {\n    return Object.keys(entities).filter((k) => entities[k].__entitySet === 'assets').map((k) => entities[k])\n  }\n\n  componentDidMount () {\n    this.removeInvalidReferences()\n  }\n\n  componentDidUpdate () {\n    this.removeInvalidReferences()\n  }\n\n  changeStaticPdf (props, change) {\n    const { entity, onChange } = props\n    const staticPdf = entity.staticPdf || {}\n\n    onChange({\n      ...entity,\n      staticPdf: { ...staticPdf, ...change }\n    })\n  }\n\n  removeInvalidReferences () {\n    const { entity, entities, onChange } = this.props\n\n    if (!entity.staticPdf) {\n      return\n    }\n\n    const updatedAssetItems = Object.keys(entities).filter(\n      (k) => entities[k].__entitySet === 'assets' && entities[k].shortid === entity.staticPdf.pdfAssetShortid\n    )\n\n    if (updatedAssetItems.length === 0 && entity.staticPdf.pdfAssetShortid) {\n      onChange({\n        _id: entity._id,\n        staticPdf: {\n          ...entity.staticPdf,\n          pdfAssetShortid: null\n        }\n      })\n    }\n  }\n\n  render () {\n    const { entity } = this.props\n    const staticPdf = entity.staticPdf || {}\n    const changeStaticPdf = this.changeStaticPdf\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'>\n          <label>Select PDF asset</label>\n          <EntityRefSelect\n            headingLabel='Select PDF asset'\n            newLabel='New PDF asset for template'\n            value={staticPdf.pdfAssetShortid || ''}\n            onChange={(selected) => changeStaticPdf(this.props, { pdfAssetShortid: selected.length > 0 ? selected[0].shortid : null })}\n            filter={(references) => ({ data: references.assets })}\n            renderNew={(modalProps) => <sharedComponents.NewAssetModal {...modalProps} options={{ ...modalProps.options, defaults: { folder: entity.folder }, activateNewTab: false }} />}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default StaticPdfTemplateProperties\n","module.exports = Studio.runtime['helpers/extends'];","module.exports = Studio.libraries['react'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import StaticPdfTemplateProperties from './StaticPdfTemplateProperties'\nimport Studio from 'jsreport-studio'\n\nStudio.addPropertiesComponent(\n  StaticPdfTemplateProperties.title,\n  StaticPdfTemplateProperties,\n  (entity) => entity.__entitySet === 'templates' && entity.recipe === 'static-pdf'\n)\n\nStudio.entityEditorComponentKeyResolvers.push((entity) => {\n  if (entity.__entitySet === 'templates' && entity.recipe === 'static-pdf') {\n    let pdfAsset\n\n    if (entity.staticPdf != null && entity.staticPdf.pdfAssetShortid != null) {\n      pdfAsset = Studio.getEntityByShortid(entity.staticPdf.pdfAssetShortid, false)\n    }\n\n    return {\n      key: 'assets',\n      entity: pdfAsset,\n      props: {\n        icon: 'fa-link',\n        embeddingCode: '',\n        displayName: `pdf asset: ${pdfAsset != null ? pdfAsset.name : '<none>'}`,\n        emptyMessage: 'No pdf asset assigned, please add a reference to a pdf asset in the properties'\n      }\n    }\n  }\n})\n"],"names":["React","Component","Studio","EntityRefSelect","sharedComponents","StaticPdfTemplateProperties","title","entity","entities","staticPdf","pdfAssetShortid","foundItems","selectAssets","filter","e","shortid","length","name","Object","keys","k","__entitySet","map","componentDidMount","removeInvalidReferences","componentDidUpdate","changeStaticPdf","props","change","onChange","updatedAssetItems","_id","render","createElement","className","headingLabel","newLabel","value","selected","references","data","assets","renderNew","modalProps","NewAssetModal","_extends","options","defaults","folder","activateNewTab","addPropertiesComponent","recipe","entityEditorComponentKeyResolvers","push","pdfAsset","getEntityByShortid","key","icon","embeddingCode","displayName","emptyMessage"],"sourceRoot":""}