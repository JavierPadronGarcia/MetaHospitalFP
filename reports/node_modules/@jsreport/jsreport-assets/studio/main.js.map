{"version":3,"file":"main.js","mappings":";;;;;;AAAA;;;;;;;ACAA;;;;;;;;;;;;;;;ACAwC;AACJ;AAEpC,IAAIG,iBAAiB;AAErB,MAAMC,iBAAiB,SAASH,4CAAS,CAAC;EACxCI,WAAWA,CAAEC,KAAK,EAAE;IAClB,KAAK,CAACA,KAAK,CAAC;IAEZ,IAAI,CAACC,YAAY,gBAAGP,sDAAe,CAAC,CAAC;EACvC;;EAEA;EACA;EACA,OAAOS,UAAUA,CAAEC,IAAI,EAAE;IACvBP,iBAAiB,CAACQ,cAAc,CAAC,MAAM,EAAEC,SAAS,EAAEF,IAAI,CAAC;EAC3D;EAEA,OAAOG,aAAaA,CAAEC,QAAQ,EAAEJ,IAAI,EAAE;IACpCP,iBAAiB,CAACQ,cAAc,CAAC,KAAK,EAAEG,QAAQ,EAAEJ,IAAI,CAAC;EACzD;EAEAK,iBAAiBA,CAAA,EAAI;IACnBZ,iBAAiB,GAAG,IAAI;EAC1B;EAEAa,MAAMA,CAAEC,CAAC,EAAE;IACT,IAAI,CAACA,CAAC,CAACC,MAAM,CAACC,KAAK,CAACC,MAAM,EAAE;MAC1B;IACF;IAEA,MAAMC,aAAa,GAAGJ,CAAC,CAACC,MAAM,CAACG,aAAa;IAC5C,MAAMC,WAAW,GAAGL,CAAC,CAACC,MAAM,CAACI,WAAW;IACxC,MAAMC,cAAc,GAAGN,CAAC,CAACC,MAAM,CAACK,cAAc;IAC9C,MAAMC,mBAAmB,GAAGP,CAAC,CAACC,MAAM,CAACM,mBAAmB;IACxD,MAAMC,cAAc,GAAGR,CAAC,CAACC,MAAM,CAACO,cAAc;IAE9C,OAAOR,CAAC,CAACC,MAAM,CAACG,aAAa;IAC7B,OAAOJ,CAAC,CAACC,MAAM,CAACI,WAAW;IAC3B,OAAOL,CAAC,CAACC,MAAM,CAACO,cAAc;IAE9B,MAAMC,IAAI,GAAGT,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAC9B,MAAMQ,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAE/BD,MAAM,CAACE,SAAS,GAAG,YAAY;MAC7B,IAAI,CAACtB,YAAY,CAACuB,OAAO,CAACC,KAAK,GAAG,EAAE;MAEpC,IAAI,IAAI,CAACC,IAAI,KAAK,KAAK,EAAE;QACvB,IAAI9B,mEAAiB,EAAE;UACrB,MAAMA,iEAAiB,CAACgC,IAAI,CAAC,CAAC;QAChC;QAEA,IAAIC,KAAK,GAAG,CAAC,CAAC;QAEd,IAAId,aAAa,IAAI,IAAI,EAAE;UACzBc,KAAK,GAAGC,MAAM,CAACC,MAAM,CAACF,KAAK,EAAEd,aAAa,CAAC;QAC7C;QAEAc,KAAK,GAAGC,MAAM,CAACC,MAAM,CAACF,KAAK,EAAE;UAC3BG,OAAO,EAAEX,MAAM,CAACY,MAAM,CAACC,SAAS,CAACb,MAAM,CAACY,MAAM,CAACE,OAAO,CAAC,SAAS,CAAC,GAAG,SAAS,CAACrB,MAAM,CAAC;UACrFsB,IAAI,EAAEhB,IAAI,CAACgB;QACb,CAAC,CAAC;QAEF,MAAMC,QAAQ,GAAG,MAAMzC,0DAAU,CAAC2C,IAAI,CAAC,eAAe,EAAE;UACtDC,IAAI,EAAEX;QACR,CAAC,CAAC;QAEFQ,QAAQ,CAACI,WAAW,GAAG,QAAQ;QAE/B7C,wEAAwB,CAACyC,QAAQ,CAAC;QAClCzC,8DAAc,CAACkC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEM,QAAQ,CAAC,EAAEpB,cAAc,CAAC;QAE3D,IAAIC,mBAAmB,EAAE;UACvBA,mBAAmB,CAACmB,QAAQ,CAAC;QAC/B;MACF;MAEA,IAAI,IAAI,CAACX,IAAI,KAAK,MAAM,EAAE;QACxB,IAAI9B,mEAAiB,EAAE;UACrBA,mEAAmB,CAAC;YAClBwC,IAAI,EAAEpB,WAAW,CAACoB,IAAI;YACtBJ,OAAO,EAAEX,MAAM,CAACY,MAAM,CAACC,SAAS,CAACb,MAAM,CAACY,MAAM,CAACE,OAAO,CAAC,SAAS,CAAC,GAAG,SAAS,CAACrB,MAAM;UACtF,CAAC,CAAC;UAEF,MAAMlB,iEAAiB,CAACgC,IAAI,CAAC,CAAC;QAChC,CAAC,MAAM;UACL,MAAMhC,0DAAU,CAACiD,KAAK,CAAE,iBAAgB7B,WAAW,CAAC8B,GAAI,GAAE,EAAE;YAC1DN,IAAI,EAAE;cACJR,OAAO,EAAEX,MAAM,CAACY,MAAM,CAACC,SAAS,CAACb,MAAM,CAACY,MAAM,CAACE,OAAO,CAAC,SAAS,CAAC,GAAG,SAAS,CAACrB,MAAM,CAAC;cACrFiC,IAAI,EAAE;YACR;UACF,CAAC,CAAC;UACFnD,iEAAiB,CAACoB,WAAW,CAAC8B,GAAG,EAAE,IAAI,CAAC;QAC1C;MACF;MAEA,IAAI3B,cAAc,EAAE;QAClBA,cAAc,CAAC,CAAC;MAClB;IACF,CAAC;IAEDE,MAAM,CAAC4B,OAAO,GAAG,YAAY;MAC3B,MAAMC,MAAM,GAAG,sCAAsC;MAErD,IAAI/B,cAAc,EAAE;QAClBA,cAAc,CAAC,IAAIgC,KAAK,CAACD,MAAM,CAAC,CAAC;MACnC;MAEAE,KAAK,CAACF,MAAM,CAAC;IACf,CAAC;IAED7B,MAAM,CAACgC,aAAa,CAACjC,IAAI,CAAC;EAC5B;EAEAf,cAAcA,CAAEqB,IAAI,EAAElB,QAAQ,EAAa;IAAA,IAAXJ,IAAI,GAAAkD,SAAA,CAAAxC,MAAA,QAAAwC,SAAA,QAAAhD,SAAA,GAAAgD,SAAA,MAAG,CAAC,CAAC;IACvC,MAAMC,oBAAoB,GAAGnD,IAAI,CAACY,WAAW;IAE7C,IAAI,CAACU,IAAI,GAAGA,IAAI;IAEhB,IAAItB,IAAI,CAACa,cAAc,IAAI,IAAI,EAAE;MAC/B,IAAI,CAAChB,YAAY,CAACuB,OAAO,CAACP,cAAc,GAAGb,IAAI,CAACa,cAAc;IAChE,CAAC,MAAM;MACL,OAAO,IAAI,CAAChB,YAAY,CAACuB,OAAO,CAACP,cAAc;IACjD;IAEA,IAAIT,QAAQ,EAAE;MACZ,IAAI,CAACP,YAAY,CAACuB,OAAO,CAACT,aAAa,GAAGP,QAAQ;IACpD,CAAC,MAAM;MACL,OAAO,IAAI,CAACP,YAAY,CAACuB,OAAO,CAACT,aAAa;IAChD;IAEA,IAAIwC,oBAAoB,EAAE;MACxB,IAAI,CAACtD,YAAY,CAACuB,OAAO,CAACR,WAAW,GAAGuC,oBAAoB;IAC9D,CAAC,MAAM,IAAI7B,IAAI,KAAK,KAAK,EAAE;MACzB,IAAI,CAACzB,YAAY,CAACuB,OAAO,CAACR,WAAW,GAAG;QACtC8B,GAAG,EAAE,IAAI,CAAC9C,KAAK,CAACwD,GAAG,CAACC,MAAM,CAACX,GAAG;QAC9BV,IAAI,EAAE,IAAI,CAACpC,KAAK,CAACwD,GAAG,CAACC,MAAM,CAACrB;MAC9B,CAAC;IACH;IAEA,IAAIhC,IAAI,CAACc,mBAAmB,EAAE;MAC5B,IAAI,CAACjB,YAAY,CAACuB,OAAO,CAACN,mBAAmB,GAAGd,IAAI,CAACc,mBAAmB;IAC1E,CAAC,MAAM;MACL,OAAO,IAAI,CAACjB,YAAY,CAACuB,OAAO,CAACN,mBAAmB;IACtD;IAEA,IAAId,IAAI,CAACe,cAAc,EAAE;MACvB,IAAI,CAAClB,YAAY,CAACuB,OAAO,CAACL,cAAc,GAAGf,IAAI,CAACe,cAAc;IAChE,CAAC,MAAM;MACL,OAAO,IAAI,CAAClB,YAAY,CAACuB,OAAO,CAACL,cAAc;IACjD;IAEA,IAAI,CAAClB,YAAY,CAACuB,OAAO,CAACkC,aAAa,CAAC,IAAIC,UAAU,CAAC,OAAO,EAAE;MAC9DC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE,KAAK;MACdC,UAAU,EAAE;IACd,CAAC,CAAC,CAAC;EACL;EAEAC,YAAYA,CAAA,EAAI;IACd,oBACEtE,0DAAA;MACEgC,IAAI,EAAC,MAAM;MACXwC,GAAG,EAAC,MAAM;MACVC,GAAG,EAAE,IAAI,CAAClE,YAAa;MACvBmE,KAAK,EAAE;QAAEC,OAAO,EAAE;MAAO,CAAE;MAC3BC,QAAQ,EAAG3D,CAAC,IAAK,IAAI,CAACD,MAAM,CAACC,CAAC;IAAE,CACjC,CAAC;EAEN;EAEA4D,MAAMA,CAAA,EAAI;IACR,OAAO,IAAI,CAACP,YAAY,CAAC,IAAI,CAAC;EAChC;AACF;AAEA,iEAAelE,iBAAiB;;;;;;;AChLnB;;AAEb,eAAe,mBAAO,CAAC,EAAa;AACpC;;AAEA;AACA;;;;;;;ACNa;;AAEb,sBAAsB,mBAAO,CAAC,CAAkB;;AAEhD;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,IAAI;;AAE/C;AACA;AACA,4BAA4B,UAAU;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,0BAA0B;AAC5C;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACtCA,iEAAe,CAAC;EACdoE,GAAG,EAAE,QAAQ;EACbM,KAAK,EAAE,QAAQ;EACf/C,KAAK,EAAE,QAAQ;EACfgD,IAAI,EAAE;AACR,CAAC,EAAE;EACDP,GAAG,EAAE,QAAQ;EACbM,KAAK,EAAE,QAAQ;EACf/C,KAAK,EAAE,QAAQ;EACfgD,IAAI,EAAE;AACR,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;ACVsC;AACc;AACoD;AACvE;AACsB;AACT;AACX;AAErCO,8CAAgB,CAACC,IAAI,CAAC,KAAK,CAAC;;AAE5B;AACA,MAAMC,cAAc,GAAIC,IAAI,IAAK;EAC/B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,OAAO,GAAGT,qDAAc,CAAClF,iEAAiB,CAACuF,IAAI,CAAC,CAAC;IACvDI,OAAO,CAACG,GAAG,CAAC,UAACC,GAAG;MAAA,IAAE;QAAEC;MAAK,CAAC,GAAAtC,SAAA,CAAAxC,MAAA,QAAAwC,SAAA,QAAAhD,SAAA,GAAAgD,SAAA,MAAG,CAAC,CAAC;MAAA,OAAKqC,GAAG,GAAGL,MAAM,CAAC,IAAInC,KAAK,CAACyC,IAAI,IAAID,GAAG,CAACE,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAGR,OAAO,CAACO,IAAI,CAAC;IAAA,EAAC;EACtG,CAAC,CAAC;AACJ,CAAC;AAED,MAAME,WAAW,SAASnG,4CAAS,CAAC;EAClCI,WAAWA,CAAEC,KAAK,EAAE;IAClB,KAAK,CAACA,KAAK,CAAC;IAEZ,IAAI+F,iBAAiB,GAAG,KAAK;IAE7B,IAAI/F,KAAK,CAACgG,UAAU,IAAI,IAAI,IAAIhG,KAAK,CAACiG,iBAAiB,IAAI,IAAI,EAAE;MAC/DF,iBAAiB,GAAG/F,KAAK,CAACiG,iBAAiB;IAC7C;IAEA,IAAI,CAACC,KAAK,GAAG;MACXC,cAAc,EAAE,IAAI;MACpBC,UAAU,EAAEL,iBAAiB;MAC7BM,WAAW,EAAE,KAAK;MAClBC,cAAc,EAAE;IAClB,CAAC;IAED,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,CAACC,IAAI,CAAC,IAAI,CAAC;EAC5D;EAEA,MAAM/F,iBAAiBA,CAAA,EAAI;IACzB,MAAM;MAAEgD;IAAO,CAAC,GAAG,IAAI,CAACzD,KAAK;IAE7B,IAAI,CAACyD,MAAM,EAAE;MACX,OAAO,IAAI,CAACgD,QAAQ,CAAC;QACnBN,cAAc,EAAE;MAClB,CAAC,CAAC;IACJ;IAEA,IAAInE,OAAO,GAAGyB,MAAM,CAACzB,OAAO;IAE5B,IAAIyB,MAAM,CAACV,IAAI,EAAE;MACf,MAAMnD,iEAAiB,CAAC6D,MAAM,CAACX,GAAG,CAAC;MACnC,MAAM6D,EAAE,GAAG,MAAM/G,0DAAU,CAAC4F,GAAG,CAAE,UAAS/B,MAAM,CAACX,GAAI,UAAS,EAAE;QAAE8D,YAAY,EAAE;MAAc,CAAC,CAAC;MAChG,MAAMC,GAAG,GAAGC,MAAM,CAACC,YAAY,CAACC,KAAK,CAAC,IAAI,EAAE,IAAIC,UAAU,CAACN,EAAE,CAAC,CAAC;MAC/D,MAAMO,QAAQ,GAAGC,kBAAkB,CAACC,MAAM,CAACP,GAAG,CAAC,CAAC;MAChD7E,OAAO,GAAGqF,IAAI,CAACC,QAAQ,CAACC,kBAAkB,CAACL,QAAQ,CAAC,CAAC,CAAC;IACxD;IAEA,IAAI,CAACT,QAAQ,CAAC;MAAEzE,OAAO;MAAEmE,cAAc,EAAE;IAAM,CAAC,CAAC;EACnD;EAEA,MAAMqB,kBAAkBA,CAAEC,SAAS,EAAE;IACnC,MAAM;MAAEhE;IAAO,CAAC,GAAG,IAAI,CAACzD,KAAK;IAE7B,IAAI,CAACyD,MAAM,EAAE;MACX;IACF;IAEA,IAAIA,MAAM,CAACV,IAAI,KAAK,CAAC,IAAI,CAACmD,KAAK,CAACnD,IAAI,IAAI0E,SAAS,CAAChE,MAAM,CAACV,IAAI,KAAKU,MAAM,CAACV,IAAI,CAAC,EAAE;MAC9E,IAAI;QACF,MAAMA,IAAI,GAAG,MAAMmC,cAAc,CAAE,eAAcqC,kBAAkB,CAAC9D,MAAM,CAACV,IAAI,CAAE,EAAC,CAAC;QACnF,IAAI,CAAC0D,QAAQ,CAAC;UAAE1D,IAAI,EAAEA;QAAK,CAAC,CAAC;MAC/B,CAAC,CAAC,OAAOpC,CAAC,EAAE;QACV,IAAI,CAAC8F,QAAQ,CAAC;UAAE1D,IAAI,EAAEpC,CAAC,CAAC+G;QAAQ,CAAC,CAAC;MACpC;IACF;EACF;EAEAC,YAAYA,CAAElE,MAAM,EAAE;IACpB,IAAIA,MAAM,IAAI,IAAI,EAAE;MAAE,OAAO,KAAK;IAAC;IACnC,OAAOA,MAAM,CAACrB,IAAI,CAACwF,KAAK,CAAC,qBAAqB,CAAC,IAAI,IAAI;EACzD;EAEAC,OAAOA,CAAEpE,MAAM,EAAE;IACf,IAAIA,MAAM,IAAI,IAAI,EAAE;MAAE,OAAO,KAAK;IAAC;IACnC,OAAOA,MAAM,CAACrB,IAAI,CAACwF,KAAK,CAAC,2BAA2B,CAAC,IAAI,IAAI;EAC/D;EAEAE,MAAMA,CAAErE,MAAM,EAAE;IACd,IAAIA,MAAM,IAAI,IAAI,EAAE;MAAE,OAAO,KAAK;IAAC;IACnC,OAAOA,MAAM,CAACrB,IAAI,CAACwF,KAAK,CAAC,6BAA6B,CAAC,IAAI,IAAI;EACjE;EAEAG,KAAKA,CAAEtE,MAAM,EAAE;IACb,IAAIA,MAAM,IAAI,IAAI,EAAE;MAAE,OAAO,KAAK;IAAC;IACnC,OAAOA,MAAM,CAACrB,IAAI,CAACwF,KAAK,CAAC,UAAU,CAAC,IAAI,IAAI;EAC9C;EAEAI,SAASA,CAAEC,SAAS,EAAE;IACpB,QAAQA,SAAS;MACf,KAAK,KAAK;QAAE,OAAO,UAAU;MAC7B,KAAK,OAAO;QAAE,OAAO,OAAO;MAC5B,KAAK,KAAK;QAAE,OAAO,mBAAmB;MACtC;QAAS,OAAO,MAAM;IACxB;EACF;EAEAC,gBAAgBA,CAAEzE,MAAM,EAAE;IACxB,IAAIA,MAAM,IAAI,IAAI,EAAE;MAAE,OAAO,EAAE;IAAC;IAEhC,MAAM0E,KAAK,GAAG1E,MAAM,CAACrB,IAAI,CAACgG,KAAK,CAAC,GAAG,CAAC;IACpC,MAAMH,SAAS,GAAGE,KAAK,CAACA,KAAK,CAACrH,MAAM,GAAG,CAAC,CAAC;IAEzC,IAAI,IAAI,CAACd,KAAK,CAACqI,aAAa,IAAI,IAAI,EAAE;MACpC,OAAO,IAAI,CAACrI,KAAK,CAACqI,aAAa;IACjC;IAEA,IAAI,IAAI,CAACR,OAAO,CAACpE,MAAM,CAAC,EAAE;MACxB,OAAQ,sBAAqB7D,wEAAwB,CAAC6D,MAAM,CAAE,mBAAkB;IAClF;IAEA,IAAI,IAAI,CAACqE,MAAM,CAACrE,MAAM,CAAC,EAAE;MACvB,OAAQ;AACd,kBAAkB0E,KAAK,CAAC,CAAC,CAAE;AAC3B,sBAAsBvI,wEAAwB,CAAC6D,MAAM,CAAE;AACvD,YAAY,IAAI,CAACuE,SAAS,CAACC,SAAS,CAAE;AACtC,EAAE;IACE;IAEA,IAAI,IAAI,CAACN,YAAY,CAAClE,MAAM,CAAC,EAAE;MAC7B,OAAQ,YAAW7D,wEAAwB,CAAC6D,MAAM,CAAE,cAAa;IACnE;IAEA,OAAQ,YAAW7D,wEAAwB,CAAC6D,MAAM,CAAE,KAAI;EAC1D;EAEA8E,oBAAoBA,CAAE9E,MAAM,EAAE;IAC5B,IAAI,IAAI,CAACzD,KAAK,CAACwI,WAAW,IAAI,IAAI,EAAE;MAClC,OAAO,IAAI,CAACxI,KAAK,CAACwI,WAAW;IAC/B;IAEA,IAAI,IAAI,CAACb,YAAY,CAAClE,MAAM,CAAC,EAAE;MAC7B,OAAO,IAAI;IACb;IAEA,OAAO,KAAK;EACd;EAEAgF,uBAAuBA,CAAEhF,MAAM,EAAE;IAC/B,IAAI,IAAI,CAACzD,KAAK,CAAC0I,cAAc,IAAI,IAAI,EAAE;MACrC,OAAO,IAAI,CAAC1I,KAAK,CAAC0I,cAAc;IAClC;IAEA,IAAI,IAAI,CAACf,YAAY,CAAClE,MAAM,CAAC,EAAE;MAC7B,OAAO7D,mEAAiB,CAACgJ,MAAM,CAACC,OAAO,CAACC,aAAa,CAACC,OAAO,KAAK,KAAK;IACzE;IAEA,OAAO,IAAI;EACb;EAEAC,OAAOA,CAAEvF,MAAM,EAAE;IACf,MAAM;MAAE4C;IAAY,CAAC,GAAG,IAAI,CAACH,KAAK;IAClC,MAAM;MAAE+C;IAAU,CAAC,GAAG,IAAI,CAACjJ,KAAK;IAChC,MAAMwI,WAAW,GAAG,IAAI,CAACD,oBAAoB,CAAC9E,MAAM,CAAC;IACrD,MAAMiF,cAAc,GAAG,IAAI,CAACD,uBAAuB,CAAChF,MAAM,CAAC;IAE3D,IAAI,CAAC+E,WAAW,IAAI,CAACE,cAAc,EAAE;MACnC;IACF;IAEA,IAAIO,SAAS,EAAE;MACbA,SAAS,CAACxF,MAAM,CAAC;IACnB,CAAC,MAAM,IAAI,IAAI,CAACkE,YAAY,CAAClE,MAAM,CAAC,EAAE;MACpC,IACE7D,mEAAiB,CAACgJ,MAAM,CAACC,OAAO,CAACC,aAAa,CAACI,WAAW,KAAK,KAAK,IACpEtJ,2EAA2B,CAAC,yBAAyB,EAAE,KAAK,CAAC,KAAK,KAAK,EACvE;QACAA,iEAAiB,CAAC,yBAAyB,EAAE,IAAI,CAAC;QAElDA,gEAAgB,CAAC,mBACfF,0DAAA,cAAK,2LAGH,eAAAA,0DAAA;UACE4J,IAAI,EAAC,mDAAmD;UAAC1I,MAAM,EAAC,QAAQ;UAAC2I,GAAG,EAAC;QAAqB,GACnG,sBAEE,CAAC,KACD,CACN,CAAC;MACJ;IACF;IAEA,IAAIlD,WAAW,EAAE;MACf,IAAI,CAACmD,YAAY,CAAC,MAAM;QACtB,IAAI,CAACR,OAAO,CAACvF,MAAM,CAAC;MACtB,CAAC,CAAC;IACJ,CAAC,MAAM;MACL7D,oEAAoB,CAAC,CAAC;MAEtB,IAAI,CAAC6G,QAAQ,CAAC;QACZH,cAAc,EAAE,IAAI;QACpBD,WAAW,EAAE,IAAI;QACjBD,UAAU,EAAE;MACd,CAAC,CAAC;IACJ;EACF;EAEAG,iBAAiBA,CAAA,EAAI;IACnB3G,mEAAmB,CAAC,CAAC;IAErB,IAAI,CAAC6G,QAAQ,CAAC;MACZH,cAAc,EAAE;IAClB,CAAC,CAAC;EACJ;EAEAkD,YAAYA,CAAEG,IAAI,EAAE;IAClB,IAAI,CAAClD,QAAQ,CAAC;MACZJ,WAAW,EAAE;IACf,CAAC,EAAE,MAAMsD,IAAI,IAAIA,IAAI,CAAC,CAAC,CAAC;EAC1B;EAEAC,YAAYA,CAAEnG,MAAM,EAAE;IACpB,oBACE/D,0DAAA;MAAKmK,SAAS,EAAC;IAAe,gBAC5BnK,0DAAA,2BACEA,0DAAA,0BAAIA,0DAAA;MAAGmK,SAAS,EAAC;IAAc,CAAE,CAAC,KAAC,EAACpG,MAAM,CAACrB,IAAS,CACjD,CAAC,eACN1C,0DAAA,2BACEA,0DAAA;MAAGmK,SAAS,EAAC,qBAAqB;MAACN,GAAG,EAAC,YAAY;MAAC3I,MAAM,EAAC,QAAQ;MAAC0I,IAAI,EAAE1J,iEAAiB,CAAE,UAAS6D,MAAM,CAACX,GAAI,wBAAuB,CAAE;MAAC0B,KAAK,EAAC;IAAU,gBACzJ9E,0DAAA;MAAGmK,SAAS,EAAC;IAAgB,CAAE,CAAC,aAC/B,CAAC,eACJnK,0DAAA;MAAQmK,SAAS,EAAC,qBAAqB;MAACC,OAAO,EAAEA,CAAA,KAAMhK,6DAAiB,CAACK,UAAU,CAAC;IAAE,gBACpFT,0DAAA;MAAGmK,SAAS,EAAC;IAAc,CAAE,CAAC,WACxB,CACL,CACF,CAAC;EAEV;EAEAE,mBAAmBA,CAAA,EAAI;IACrB,MAAM;MAAEhH,IAAI;MAAEuD,cAAc;MAAED,WAAW;MAAED;IAAW,CAAC,GAAG,IAAI,CAACF,KAAK;IACpE,MAAM;MAAEzC,MAAM;MAAEuC,UAAU;MAAEgE,WAAW;MAAEC,IAAI;MAAEC,UAAU;MAAEC;IAAS,CAAC,GAAG,IAAI,CAACnK,KAAK;IAClF,MAAMwI,WAAW,GAAG,IAAI,CAACD,oBAAoB,CAAC9E,MAAM,CAAC;IACrD,MAAMiF,cAAc,GAAG,IAAI,CAACD,uBAAuB,CAAChF,MAAM,CAAC;IAC3D,MAAM4E,aAAa,GAAG,IAAI,CAACH,gBAAgB,CAACzE,MAAM,CAAC;IAEnD,IAAI2G,WAAW,GAAGJ,WAAW;IAE7B,IAAI,CAACI,WAAW,IAAI3G,MAAM,EAAE;MAC1B2G,WAAW,GAAG3G,MAAM,CAACrB,IAAI;IAC3B;IAEA,IAAI,CAACgI,WAAW,EAAE;MAChBA,WAAW,GAAG,QAAQ;IACxB;IAEA,oBACE1K,0DAAA;MAAKmK,SAAS,EAAEzF,wDAAK,CAACiG;IAAiB,gBACrC3K,0DAAA;MAAKmK,SAAS,EAAEzF,wDAAK,CAACkG;IAAW,gBAC/B5K,0DAAA;MAAImK,SAAS,EAAEzF,wDAAK,CAACmG;IAAiB,gBACpC7K,0DAAA,2BACEA,0DAAA;MAAGmK,SAAS,EAAG,MAAKI,IAAK;IAAE,CAAE,CAAC,QAE9B,EAACxG,MAAM,IAAI,IAAI,gBAAG/D,0DAAA;MAAG4J,IAAI,EAAC,GAAG;MAACQ,OAAO,EAAGU,EAAE,IAAK;QAAEA,EAAE,CAACC,cAAc,CAAC,CAAC;QAAE7K,8DAAc,CAAC;UAAEkD,GAAG,EAAEW,MAAM,CAACX;QAAI,CAAC,CAAC;MAAC;IAAE,GAAEsH,WAAe,CAAC,GAAGA,WAC9H,CACH,CAAC,EACJ/B,aAAa,KAAK,EAAE,iBACnB3I,0DAAA,CAACqF,oEAAe;MAACa,IAAI,EAAEyC;IAAc,gBACnC3I,0DAAA;MAAGmK,SAAS,EAAC,qBAAqB;MAACrF,KAAK,EAAC;IAAsC,gBAC7E9E,0DAAA;MAAGmK,SAAS,EAAC;IAAiB,CAAE,CAC/B,CACY,CAClB,EACApG,MAAM,IAAI,IAAI,iBACb/D,0DAAA;MACEmK,SAAS,EAAC,qBAAqB;MAC/BrF,KAAK,EAAC,UAAU;MAChBsF,OAAO,EAAEA,CAAA,KAAM;QACb,IAAII,UAAU,EAAE;UACdA,UAAU,CAACzG,MAAM,CAAC;QACpB,CAAC,MAAM;UACL,MAAMiH,UAAU,GAAGC,QAAQ,CAAC1G,aAAa,CAAC,GAAG,CAAC;UAC9CyG,UAAU,CAAC9J,MAAM,GAAG,QAAQ;UAC5B8J,UAAU,CAACpB,IAAI,GAAG1J,iEAAiB,CAAE,UAAS6D,MAAM,CAACX,GAAI,wBAAuB,CAAC;UACjF4H,UAAU,CAACE,KAAK,CAAC,CAAC;QACpB;MACF;IAAE,gBAEFlL,0DAAA;MAAGmK,SAAS,EAAC;IAAgB,CAAE,CACzB,CACT,EACApG,MAAM,IAAI,IAAI,IAAI,CAACA,MAAM,CAACV,IAAI,iBAC7BrD,0DAAA;MACEmK,SAAS,EAAC,qBAAqB;MAC/BrF,KAAK,EAAC,QAAQ;MACdsF,OAAO,EAAEA,CAAA,KAAM;QACb,MAAMe,EAAE,GAAGA,CAAA,KAAM;UACf,IAAIC,OAAO,GAAG,KAAK;UAEnB,IAAItC,WAAW,IAAI,IAAI,CAACtC,KAAK,CAACG,WAAW,EAAE;YACzCyE,OAAO,GAAG,IAAI;UAChB;UAEA,IAAI,CAACtB,YAAY,CAAC,MAAM;YACtB,IAAIsB,OAAO,EAAE;cACX,IAAI,CAAC9B,OAAO,CAACvF,MAAM,CAAC;YACtB;UACF,CAAC,CAAC;QACJ,CAAC;QAED,IAAI0G,QAAQ,EAAE;UACZA,QAAQ,CAAC1G,MAAM,EAAEoH,EAAE,CAAC;QACtB,CAAC,MAAM;UACL/K,6DAAiB,CAACK,UAAU,CAAC;YAC3Ba,WAAW,EAAE;cACX8B,GAAG,EAAEW,MAAM,CAACX,GAAG;cACfV,IAAI,EAAEqB,MAAM,CAACrB;YACf,CAAC;YACDjB,cAAc,EAAE0J;UAClB,CAAC,CAAC;QACJ;MACF;IAAE,gBAEFnL,0DAAA;MAAGmK,SAAS,EAAC;IAAc,CAAE,CACvB,CACT,EACArB,WAAW,IAAI/E,MAAM,IAAI,IAAI,iBAC5B/D,0DAAA;MACEmK,SAAS,EAAG,uBAAsB,CAACnB,cAAc,IAAIpC,cAAc,GAAG,UAAU,GAAG,EAAG,EAAE;MACxFwD,OAAO,EAAEA,CAAA,KAAM,IAAI,CAACd,OAAO,CAACvF,MAAM,CAAE;MACpCe,KAAK,EAAE6B,WAAW,GAAG,SAAS,GAAG;IAAU,gBAE3C3G,0DAAA;MAAGmK,SAAS,EAAG,SAAQvD,cAAc,GAAG,EAAE,GAAGD,WAAW,GAAG,SAAS,GAAG,KAAM;IAAE,CAAE,CAAC,KAAC,EAACC,cAAc,GAAG,WAAW,GAAG,EAC7G,CACT,EACAkC,WAAW,IAAI/E,MAAM,IAAI,IAAI,IAAI4C,WAAW,IAAI,CAACC,cAAc,iBAC9D5G,0DAAA;MACEmK,SAAS,EAAG,uBAAsB,CAACnB,cAAc,IAAIpC,cAAc,GAAG,UAAU,GAAG,EAAG,EAAE;MACxFwD,OAAO,EAAEA,CAAA,KAAM,IAAI,CAACN,YAAY,CAAC,CAAE;MACnChF,KAAK,EAAC;IAAO,gBAEb9E,0DAAA;MAAGmK,SAAS,EAAC;IAAa,CAAE,CACtB,CACT,EACA7D,UAAU,IAAI,IAAI,iBACjBtG,0DAAA;MACEmK,SAAS,EAAG,UAASzD,UAAU,GAAG,QAAQ,GAAG,cAAe,EAAE;MAC9D0D,OAAO,EAAEA,CAAA,KAAM,IAAI,CAACrD,QAAQ,CAAEP,KAAK,IAAK;QACtC,MAAM6E,MAAM,GAAG,CAAC,CAAC;QAEjB,IAAI7E,KAAK,CAACE,UAAU,EAAE;UACpBxG,4DAAY,CAACqL,QAAQ,CAACrL,+DAAe,CAACuL,OAAO,CAACC,YAAY,CAAC,CAAC,CAAC;QAC/D,CAAC,MAAM;UACLL,MAAM,CAAC1E,WAAW,GAAG,KAAK;UAC1B0E,MAAM,CAACzE,cAAc,GAAG,KAAK;UAC7B1G,mEAAmB,CAAC,CAAC;QACvB;QAEA,OAAO;UAAEwG,UAAU,EAAE,CAACF,KAAK,CAACE,UAAU;UAAE,GAAG2E;QAAO,CAAC;MACrD,CAAC,CAAE;MACHvG,KAAK,EAAG,GAAE4B,UAAU,GAAG,MAAM,GAAG,MAAO,IAAGJ,UAAU,CAAChE,OAAO,IAAI,IAAI,GAAG,qBAAqB,GAAG,SAAU;IAAE,gBAE3GtC,0DAAA;MAAGmK,SAAS,EAAC;IAAY,CAAE,CACrB,CAEP,CAAC,EACLpG,MAAM,IAAI,IAAI,IAAIA,MAAM,CAACV,IAAI,iBAC5BrD,0DAAA;MAAKmK,SAAS,EAAEzF,wDAAK,CAACkG,UAAW;MAAClG,KAAK,EAAE;QAAEiH,MAAM,EAAE;MAAS;IAAE,gBAC5D3L,0DAAA,4BAAMA,0DAAA,yBAAGA,0DAAA;MAAGmK,SAAS,EAAC;IAAmB,CAAE,CAAC,oBAAmB,CAAC,KAAC,EAAC9G,IAAW,CAC1E,CAEJ,CAAC;EAEV;EAEAuI,mBAAmBA,CAAA,EAAI;IACrB,MAAM;MAAE7H,MAAM;MAAEuC,UAAU;MAAEuF,YAAY;MAAEC,iBAAiB;MAAEC;IAAS,CAAC,GAAG,IAAI,CAACzL,KAAK;IACpF,MAAM;MAAEoG;IAAW,CAAC,GAAG,IAAI,CAACF,KAAK;IAEjC,IAAIF,UAAU,IAAI,IAAI,IAAII,UAAU,EAAE;MACpC,MAAMsF,aAAa,gBACjBhM,0DAAA,CAACmF,uDAAU;QACTX,GAAG,EAAE8B,UAAU,CAAClD,GAAG,GAAG,UAAW;QACjCV,IAAI,EAAE4D,UAAU,CAAClD,GAAG,GAAG,UAAW;QAClC6I,WAAW,EAAEA,CAAA,KAAO,GAAE3F,UAAU,CAAC5D,IAAK,YAAY;QAClDwJ,IAAI,EAAC,YAAY;QACjBH,QAAQ,EAAGI,CAAC,IAAKJ,QAAQ,CAAC3J,MAAM,CAACC,MAAM,CAAC;UAAEe,GAAG,EAAEkD,UAAU,CAAClD;QAAI,CAAC,EAAE;UAAEgJ,OAAO,EAAED;QAAE,CAAC,CAAC,CAAE;QAClFpK,KAAK,EAAEuE,UAAU,CAAC8F,OAAO,IAAI;MAAG,CACjC,CACF;MAED,IAAIhK,MAAM,CAACiK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACjG,UAAU,EAAE,SAAS,CAAC,EAAE;QAC/D,oBACEtG,0DAAA,CAACiF,sDAAS;UACRuH,OAAO,EAAC,QAAQ;UAChB9D,KAAK,EAAC,YAAY;UAClB+D,gBAAgB,EAAC,oBAAoB;UACrCC,WAAW,EAAGvI,MAAM,CAACwI,WAAW,GAAG,GAAG,GAAI;QAAK,gBAE/C3M,0DAAA,CAACmF,uDAAU;UACTX,GAAG,EAAE8B,UAAU,CAAClD,GAAI;UACpBV,IAAI,EAAE4D,UAAU,CAAClD,GAAI;UACrB6I,WAAW,EAAEA,CAAA,KAAM3F,UAAU,CAAC5D,IAAK;UACnCwJ,IAAI,EAAEU,yBAAyB,CAACtG,UAAU,CAAC,IAAI,YAAa;UAC5DyF,QAAQ,EAAGI,CAAC,IAAKJ,QAAQ,CAAC3J,MAAM,CAACC,MAAM,CAAC;YAAEe,GAAG,EAAEkD,UAAU,CAAClD;UAAI,CAAC,EAAE;YAAEd,OAAO,EAAE6J;UAAE,CAAC,CAAC,CAAE;UAClFpK,KAAK,EAAEuE,UAAU,CAAChE,OAAO,IAAI;QAAG,CACjC,CAAC,EACD0J,aACQ,CAAC;MAEhB;MAEA,OAAOA,aAAa;IACtB;IAEA,IAAIjI,MAAM,IAAI,IAAI,EAAE;MAClB,oBACE/D,0DAAA;QAAK0E,KAAK,EAAE;UAAEmI,OAAO,EAAE;QAAO;MAAE,gBAC9B7M,0DAAA,YAAI6L,YAAY,IAAI,IAAI,GAAGA,YAAY,GAAG,gBAAoB,CAC3D,CAAC;IAEV;IAEA,MAAMpD,KAAK,GAAG1E,MAAM,CAACrB,IAAI,CAACgG,KAAK,CAAC,GAAG,CAAC;IACpC,MAAMH,SAAS,GAAGE,KAAK,CAACA,KAAK,CAACrH,MAAM,GAAG,CAAC,CAAC;IACzC,MAAM0H,WAAW,GAAG,IAAI,CAACD,oBAAoB,CAAC9E,MAAM,CAAC;IAErD,IAAI4C,WAAW,GAAG,IAAI;IAEtB,IAAImC,WAAW,EAAE;MACfnC,WAAW,GAAG,IAAI,CAACH,KAAK,CAACG,WAAW;IACtC;IAEA,IAAI,CAACA,WAAW,EAAE;MAChB,OAAO,IAAI;IACb;IAEA,IAAImF,iBAAiB,EAAE;MACrB,OAAOA,iBAAiB,CAAC/H,MAAM,EAAE;QAC/B8C,iBAAiB,EAAE,IAAI,CAACA;MAC1B,CAAC,CAAC;IACJ;IAEA,IAAI,IAAI,CAACsB,OAAO,CAACpE,MAAM,CAAC,EAAE;MACxB,oBACE/D,0DAAA;QAAK0E,KAAK,EAAE;UAAEoI,QAAQ,EAAE;QAAO;MAAE,gBAC/B9M,0DAAA;QACE+M,GAAG,EAAE7M,iEAAiB,CAAE,UAAS6D,MAAM,CAACX,GAAI,cAAa,IAAI4J,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAE,EAAC,CAAE;QACjFvI,KAAK,EAAE;UAAEC,OAAO,EAAE,OAAO;UAAEgH,MAAM,EAAE;QAAY;MAAE,CAClD,CACE,CAAC;IAEV;IAEA,IAAI,IAAI,CAACvD,MAAM,CAACrE,MAAM,CAAC,EAAE;MACvB,MAAMmJ,QAAQ,GAAGjC,QAAQ,CAAC1G,aAAa,CAAC,OAAO,CAAC;MAEhD2I,QAAQ,CAACC,WAAW,CAAClC,QAAQ,CAACmC,cAAc,CAAE;AACpD,yBAAyB3E,KAAK,CAAC,CAAC,CAAE;AAClC,qBAAqBvI,iEAAiB,CAAE,WAAU6D,MAAM,CAACX,GAAI,UAAS,CAAE;AACxE,mBAAmBmF,SAAS,KAAK,KAAK,GAAG,UAAU,GAAG,MAAO;AAC7D,UAAU,CAAC,CAAC;MAEN0C,QAAQ,CAACoC,IAAI,CAACF,WAAW,CAACD,QAAQ,CAAC;MAEnC,oBACElN,0DAAA;QAAK0E,KAAK,EAAE;UAAEoI,QAAQ,EAAE,MAAM;UAAEQ,UAAU,EAAE7E,KAAK,CAAC,CAAC,CAAC;UAAEoE,OAAO,EAAE;QAAO;MAAE,gBAAC7M,0DAAA,aAAI,oBAAkB,EAAC+D,MAAM,CAACrB,IAAS,CAAC,eAC/G1C,0DAAA,YAAG,uPAIA,CACA,CAAC;IAEV;IAEA,IAAI,IAAI,CAACqI,KAAK,CAACtE,MAAM,CAAC,EAAE;MACtB,oBACE/D,0DAAA;QAAKmK,SAAS,EAAC,OAAO;QAACzF,KAAK,EAAE;UAAE6I,MAAM,EAAE;QAAO;MAAE,gBAC/CvN,0DAAA;QAAQ0E,KAAK,EAAE;UAAE6I,MAAM,EAAE;QAAO,CAAE;QAACzK,IAAI,EAAE5C,iEAAiB,CAAE,UAAS6D,MAAM,CAACX,GAAI,cAAa,IAAI4J,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAE,EAAC,CAAE;QAACjL,IAAI,EAAC;MAAiB,gBAC1IhC,0DAAA;QAAO+M,GAAG,EAAE7M,iEAAiB,CAAE,UAAS6D,MAAM,CAACX,GAAI,cAAa,IAAI4J,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAE,EAAC,CAAE;QAACjL,IAAI,EAAC;MAAiB,CAAE,CAC3G,CACL,CAAC;IAEV;IAEA,IAAI,IAAI,CAACiG,YAAY,CAAClE,MAAM,CAAC,EAAE;MAC7B,MAAMyJ,SAAS,GAAGtN,iEAAiB,CAAE,iBAAgB6D,MAAM,CAACX,GAAI,UAAS,CAAC;MAE1E,oBACEpD,0DAAA,CAACkF,yDAAY;QACXuI,MAAM,EAAEA,CAAA,KAAM,IAAI,CAAC5G,iBAAiB,CAAC,CAAE;QACvCkG,GAAG,EAAES;MAAU,CAChB,CAAC;IAEN;IAEA,IAAIzJ,MAAM,CAACrB,IAAI,CAACgG,KAAK,CAAC,GAAG,CAAC,CAACtH,MAAM,GAAG,CAAC,IAAIkE,8CAAgB,CAACoI,QAAQ,CAAC3J,MAAM,CAACrB,IAAI,CAACgG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MAC7F,OAAO,IAAI,CAACwB,YAAY,CAACnG,MAAM,CAAC;IAClC;IAEA,IAAImI,IAAI,GAAGzD,KAAK,CAACA,KAAK,CAACrH,MAAM,GAAG,CAAC,CAAC;IAElC,IAAImH,SAAS,KAAK,IAAI,EAAE;MACtB2D,IAAI,GAAG,YAAY;IACrB;IAEA,IAAI3D,SAAS,KAAK,MAAM,EAAE;MACxB2D,IAAI,GAAG,YAAY;IACrB;IAEA,MAAM5J,OAAO,GAAG,CAAEyB,MAAM,CAACzB,OAAO,IAAIyB,MAAM,CAAC4J,WAAW,GAAI5J,MAAM,CAACzB,OAAO,GAAG,IAAI,CAACkE,KAAK,CAAClE,OAAO,KAAK,EAAE;IACpG,IAAI4D,IAAI;IACR,IAAI;MACFA,IAAI,GAAGuB,kBAAkB,CAACC,MAAM,CAACkG,IAAI,CAACtL,OAAO,CAAC,CAAC,CAAC;IAClD,CAAC,CAAC,OAAOrB,CAAC,EAAE;MACV,OAAO,IAAI,CAACiJ,YAAY,CAACnG,MAAM,CAAC;IAClC;IAEA,oBACE/D,0DAAA,CAACmF,uDAAU;MACTzC,IAAI,EAAEqB,MAAM,CAACX,GAAI;MACjB8I,IAAI,EAAEA,IAAK;MACXnK,KAAK,EAAEmE,IAAK;MACZ6F,QAAQ,EAAGI,CAAC,IAAK,IAAI,CAAC7L,KAAK,CAACyL,QAAQ,CAAC3J,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE0B,MAAM,EAAE;QAAEzB,OAAO,EAAEqF,IAAI,CAACC,QAAQ,CAACC,kBAAkB,CAACsE,CAAC,CAAC,CAAC,CAAC;QAAEwB,WAAW,EAAE;MAAK,CAAC,CAAC;IAAE,CACxI,CAAC;EAEN;EAEA9I,MAAMA,CAAA,EAAI;IACR,MAAM;MAAE4B;IAAe,CAAC,GAAG,IAAI,CAACD,KAAK;IAErC,IAAIC,cAAc,EAAE;MAClB,oBAAOzG,0DAAA,YAAM,CAAC;IAChB;IAEA,oBACEA,0DAAA;MAAKmK,SAAS,EAAC;IAAO,GACnB,IAAI,CAACE,mBAAmB,CAAC,CAAC,EAC1B,IAAI,CAACuB,mBAAmB,CAAC,CACvB,CAAC;EAEV;AACF;AAEAxF,WAAW,CAACyH,YAAY,GAAG;EACzBtD,IAAI,EAAE;AACR,CAAC;AAED,SAASqC,yBAAyBA,CAAEkB,QAAQ,EAAE;EAC5C;EACA,KAAK,MAAMC,CAAC,IAAI/I,wEAA2B,EAAE;IAC3C,MAAMkH,IAAI,GAAGlH,wEAA2B,CAAC+I,CAAC,CAAC,CAACD,QAAQ,CAAC;IACrD,IAAI5B,IAAI,EAAE;MACR,OAAOA,IAAI;IACb;EACF;EAEA,OAAO,IAAI;AACb;AAEA,iEAAe9F,WAAW;;;;;;;ACjjB1B;;;;;;;ACAa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,uBAAuB;;AAEvB,oCAAoC,mBAAO,CAAC,CAAO;;AAEnD,8CAA8C,mBAAO,CAAC,CAAmB;;AAEzE,uCAAuC,uCAAuC;;AAE9E,wBAAwB,2EAA2E,kCAAkC,wBAAwB,OAAO,kCAAkC,mIAAmI;;AAEzU,2CAA2C,gCAAgC,oCAAoC,oDAAoD,8DAA8D,iEAAiE,GAAG,kCAAkC;;AAEvU,iCAAiC,gBAAgB,sBAAsB,OAAO,uDAAuD,aAAa,+CAA+C,4CAA4C,KAAK,6CAA6C,6EAA6E,OAAO,yCAAyC,mFAAmF,OAAO;;AAEtf,sDAAsD,+BAA+B,8DAA8D,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,+BAA+B;;AAE5d,2DAA2D,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,6BAA6B;;AAEnS,kDAAkD,0CAA0C;;AAE5F,4CAA4C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD;;AAE/P,8DAA8D,sEAAsE,8DAA8D;;AAElM,kDAAkD,0EAA0E,eAAe;;AAE3I,8BAA8B,gGAAgG,mDAAmD;;AAEjL,wCAAwC,uBAAuB,yFAAyF;;AAExJ,2CAA2C,+DAA+D,6EAA6E,yEAAyE,eAAe,uDAAuD,GAAG;;AAEzU,iCAAiC,4EAA4E,iBAAiB,aAAa;;AAE3I,4CAA4C,kBAAkB,kCAAkC,oEAAoE,KAAK,OAAO,oBAAoB;;AAEpM;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,wEAAwE,aAAa;AACrF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,QAAQ;;;AAGR;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kEAAkE;AAClE;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA,CAAC;;AAED,uBAAuB;;AAEvB;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;AC7GD;AACA,iEAAe,CAAC,qKAAqK;;;;;;;;;;;;;;;;;ACD7I;AACC;AACU;AACf;AAEpC,MAAM6H,aAAa,SAAShO,4CAAS,CAAC;EACpCI,WAAWA,CAAA,EAAI;IACb,KAAK,CAAC,CAAC;IAEP,IAAI,CAAC6N,OAAO,gBAAGlO,sDAAe,CAAC,CAAC;IAChC,IAAI,CAACmO,OAAO,gBAAGnO,sDAAe,CAAC,CAAC;IAChC,IAAI,CAACwG,KAAK,GAAG;MAAE4H,MAAM,EAAE,KAAK;MAAEC,cAAc,EAAE,KAAK;MAAEC,KAAK,EAAE;IAAK,CAAC;EACpE;EAEAC,cAAcA,CAAEtN,CAAC,EAAE;IACjB,IAAIA,CAAC,CAACuD,GAAG,KAAK,OAAO,EAAE;MACrB,IAAI,CAACgK,WAAW,CAAC,CAAC;IACpB;EACF;;EAEA;EACAzN,iBAAiBA,CAAA,EAAI;IACnB0N,UAAU,CAAC,MAAM,IAAI,CAACP,OAAO,CAACpM,OAAO,CAAC4M,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EACnD;EAEA,MAAMF,WAAWA,CAAEvN,CAAC,EAAE;IACpB,IAAI8C,MAAM,GAAG,CAAC,CAAC;IAEf,IAAI,CAAC,IAAI,CAACyC,KAAK,CAAC4H,MAAM,IAAI,CAAC,CAAC,IAAI,CAACF,OAAO,CAACpM,OAAO,CAACC,KAAK,IAAI,IAAI,CAACmM,OAAO,CAACpM,OAAO,CAACC,KAAK,CAACU,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;MACtG,OAAO,IAAI,CAACsE,QAAQ,CAAC;QAAE4H,KAAK,EAAE;MAAyD,CAAC,CAAC;IAC3F;IAEA,IAAI,IAAI,CAACrO,KAAK,CAAC6I,OAAO,CAACrI,QAAQ,IAAI,IAAI,EAAE;MACvCiD,MAAM,GAAG3B,MAAM,CAACC,MAAM,CAAC0B,MAAM,EAAE,IAAI,CAACzD,KAAK,CAAC6I,OAAO,CAACrI,QAAQ,CAAC;IAC7D;IAEA,IAAI,IAAI,CAAC0F,KAAK,CAAC4H,MAAM,EAAE;MACrBrK,MAAM,CAACV,IAAI,GAAG,IAAI,CAAC8K,OAAO,CAACrM,OAAO,CAACC,KAAK;MACxC,MAAM6M,SAAS,GAAG7K,MAAM,CAACV,IAAI,CAACqF,KAAK,CAAC,GAAG,CAAC;MACxC3E,MAAM,CAACrB,IAAI,GAAGkM,SAAS,CAACA,SAAS,CAACxN,MAAM,GAAG,CAAC,CAAC;IAC/C,CAAC,MAAM;MACL2C,MAAM,CAACrB,IAAI,GAAG,IAAI,CAACwL,OAAO,CAACpM,OAAO,CAACC,KAAK;IAC1C;IAEA,IAAI,IAAI,CAACyE,KAAK,CAAC6H,cAAc,EAAE;MAC7BtK,MAAM,CAAC8K,kBAAkB,GAAG,IAAI,CAACrI,KAAK,CAAC8H,KAAK;IAC9C,CAAC,MAAM;MACLvK,MAAM,CAAC8K,kBAAkB,GAAG,IAAI;IAClC;IAEA,IAAI;MACF,IAAI3O,mEAAiB,EAAE;QACrB,MAAMA,iEAAiB,CAACgC,IAAI,CAAC,CAAC;MAChC;MAEA,MAAMS,QAAQ,GAAG,MAAMzC,0DAAU,CAAC2C,IAAI,CAAC,eAAe,EAAE;QACtDC,IAAI,EAAEiB;MACR,CAAC,CAAC;MACFpB,QAAQ,CAACI,WAAW,GAAG,QAAQ;MAE/B7C,wEAAwB,CAACyC,QAAQ,CAAC;MAClCzC,8DAAc,CAACyC,QAAQ,EAAE,IAAI,CAACrC,KAAK,CAAC6I,OAAO,CAAC5H,cAAc,CAAC;MAE3D,IAAI,IAAI,CAACjB,KAAK,CAAC6I,OAAO,CAAC2F,WAAW,EAAE;QAClC,IAAI,CAACxO,KAAK,CAAC6I,OAAO,CAAC2F,WAAW,CAACnM,QAAQ,CAAC;MAC1C;MAEA,IAAI,CAACrC,KAAK,CAACyO,KAAK,CAAC,CAAC;IACpB,CAAC,CAAC,OAAO9N,CAAC,EAAE;MACV,IAAI,CAAC8F,QAAQ,CAAC;QAAE4H,KAAK,EAAE1N,CAAC,CAAC+G;MAAQ,CAAC,CAAC;IACrC;EACF;EAEAnD,MAAMA,CAAA,EAAI;IACR,MAAM;MAAEuJ,MAAM;MAAEC,cAAc;MAAEC,KAAK;MAAEK;IAAM,CAAC,GAAG,IAAI,CAACnI,KAAK;IAE3D,MAAMwI,iBAAiB,GAAGV,KAAK,IAAI,IAAI,GAAGA,KAAK,GAAG,QAAQ;IAC1D,MAAMW,kBAAkB,GAAGjB,qDAAY,CAACkB,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACpN,KAAK,KAAKiN,iBAAiB,CAAC;IAEtF,oBACEhP,0DAAA,2BACEA,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,WAAgB,CACpB,CAAC,EACLoO,MAAM,gBAEHpO,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,4CAAiD,CAAC,eACzDA,0DAAA;MACEgC,IAAI,EAAC,MAAM;MACXU,IAAI,EAAC,MAAM;MACX+B,GAAG,EAAE,IAAI,CAAC0J;IAAQ,CACnB,CACE,CAAC,gBAGNnO,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,MAAW,CAAC,eACnBA,0DAAA;MACEgC,IAAI,EAAC,MAAM;MACXU,IAAI,EAAC,MAAM;MACX+B,GAAG,EAAE,IAAI,CAACyJ,OAAQ;MAClBkB,WAAW,EAAC,YAAY;MACxBC,UAAU,EAAGpO,CAAC,IAAK,IAAI,CAACsN,cAAc,CAACtN,CAAC;IAAE,CAC3C,CACE,CACJ,EACJf,mEAAiB,CAACgJ,MAAM,CAACC,OAAO,CAACmG,wBAAwB,KAAK,KAAK,gBAEhEtP,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,uBAA4B,CAAC,eACpCA,0DAAA;MACEgC,IAAI,EAAC,UAAU;MAACuN,OAAO,EAAEnB,MAAO;MAChCxJ,QAAQ,EAAEA,CAAA,KAAM,IAAI,CAACmC,QAAQ,CAAC;QAAEqH,MAAM,EAAE,CAACA;MAAO,CAAC;IAAE,CACpD,CACE,CAAC,gBAENpO,0DAAA,YAAM,CAAC,eACXA,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,sCAA2C,CAAC,eACnDA,0DAAA;MACEgC,IAAI,EAAC,UAAU;MAACuN,OAAO,EAAElB,cAAc,KAAK,IAAK;MACjDzJ,QAAQ,EAAGuH,CAAC,IAAK;QACf,IAAI,CAACpF,QAAQ,CAAC;UACZsH,cAAc,EAAElC,CAAC,CAACjL,MAAM,CAACqO,OAAO;UAChCjB,KAAK,EAAEnC,CAAC,CAACjL,MAAM,CAACqO,OAAO,KAAK,KAAK,GAAG,IAAI,GAAG;QAC7C,CAAC,CAAC;MACJ;IAAE,CACH,CACE,CAAC,EACLlB,cAAc,iBACbrO,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,OAAY,CAAC,eACpBA,0DAAA;MACE+B,KAAK,EAAEiN,iBAAkB;MACzBpK,QAAQ,EAAGuH,CAAC,IAAK;QACf,MAAMqD,QAAQ,GAAGrD,CAAC,CAACjL,MAAM,CAACa,KAAK;QAC/B,IAAI,CAACgF,QAAQ,CAAC;UACZuH,KAAK,EAAEkB;QACT,CAAC,CAAC;MACJ;IAAE,GAEDxB,qDAAY,CAACyB,GAAG,CAAEN,GAAG,iBACpBnP,0DAAA;MAAQwE,GAAG,EAAE2K,GAAG,CAAC3K,GAAI;MAACzC,KAAK,EAAEoN,GAAG,CAACpN,KAAM;MAAC+C,KAAK,EAAEqK,GAAG,CAACpK;IAAK,GAAEoK,GAAG,CAACrK,KAAc,CAC7E,CACK,CAAC,eACT9E,0DAAA,aAAKiP,kBAAkB,CAAClK,IAAS,CAC9B,CACN,eACD/E,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA;MACE0E,KAAK,EAAE;QAAEgL,KAAK,EAAE,KAAK;QAAE/K,OAAO,EAAEgK,KAAK,GAAG,OAAO,GAAG;MAAO;IAAE,GAC3DA,KACI,CACH,CAAC,eACN3O,0DAAA;MAAKmK,SAAS,EAAC,YAAY;MAACzF,KAAK,EAAE;QAAEiL,OAAO,EAAE;MAAI;IAAE,gBAClD3P,0DAAA,WAAK,CAAC,eACNA,0DAAA,eAAM,8EAA4E,eAAAA,0DAAA,WAAK,CAAC,4FACE,eAAAA,0DAAA,WAAK,CAAC,WAC9F,eAAAA,0DAAA;MAAGkB,MAAM,EAAC,QAAQ;MAAC2I,GAAG,EAAC,YAAY;MAAC/E,KAAK,EAAC,MAAM;MAAC8E,IAAI,EAAC;IAAkC,GAAC,eAAgB,CAAC,iBACtG,CACH,CAAC,eACN5J,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA;MACEmK,SAAS,EAAC,qBAAqB;MAC/BC,OAAO,EAAEA,CAAA,KAAM;QACb,IAAI,CAAC9J,KAAK,CAACyO,KAAK,CAAC,CAAC;QAClB3O,0DAAiB,CAACS,aAAa,CAAC,IAAI,CAACP,KAAK,CAAC6I,OAAO,CAACrI,QAAQ,EAAE;UAC3DS,cAAc,EAAE,IAAI,CAACjB,KAAK,CAAC6I,OAAO,CAAC5H,cAAc;UACjDC,mBAAmB,EAAE,IAAI,CAAClB,KAAK,CAAC6I,OAAO,CAAC2F;QAC1C,CAAC,CAAC;MACJ;IAAE,GACH,QACO,CAAC,eACT9O,0DAAA;MAAQoK,OAAO,EAAEA,CAAA,KAAM,IAAI,CAACoE,WAAW,CAAC,CAAE;MAACrE,SAAS,EAAC;IAAqB,GAAC,IAAU,CAClF,CACF,CAAC;EAEV;AACF;AAEA,iEAAe8D,aAAa;;;;;;;;;;;;;;;;ACrLY;AACC;AACL;AAEpC,MAAM2B,eAAe,SAAS3P,4CAAS,CAAC;EACtC,OAAO6E,KAAKA,CAAEf,MAAM,EAAEyH,QAAQ,EAAE;IAC9B,IAAIqE,MAAM,GAAG9L,MAAM,CAACV,IAAI,GAAG,SAAS,GAAG,EAAE;IAEzC,IAAIU,MAAM,CAAC8K,kBAAkB,IAAI,IAAI,EAAE;MACrCgB,MAAM,IAAK,2BAA0B9L,MAAM,CAAC8K,kBAAmB,GAAE;IACnE;IAEA,OAAQ,QAAOgB,MAAO,EAAC;EACzB;EAEA9O,iBAAiBA,CAAA,EAAI;IACnB,IAAI,CAAC+O,cAAc,CAAC,CAAC;EACvB;EAEAhI,kBAAkBA,CAAA,EAAI;IACpB,IAAI,CAACgI,cAAc,CAAC,CAAC;EACvB;EAEAA,cAAcA,CAAA,EAAI;IAChB,MAAM;MAAE/L,MAAM;MAAEa;IAAS,CAAC,GAAG,IAAI,CAACtE,KAAK;IAEvC,IAAIyD,MAAM,CAACsK,cAAc,KAAK,IAAI,IAAItK,MAAM,CAAC8K,kBAAkB,IAAI,IAAI,EAAE;MACvEjK,QAAQ,CAAC;QAAExB,GAAG,EAAEW,MAAM,CAACX,GAAG;QAAEyL,kBAAkB,EAAE,QAAQ;QAAER,cAAc,EAAE;MAAM,CAAC,CAAC;IACpF;EACF;EAEAxJ,MAAMA,CAAA,EAAI;IACR,MAAM;MAAEd,MAAM;MAAEa;IAAS,CAAC,GAAG,IAAI,CAACtE,KAAK;IAEvC,MAAM0O,iBAAiB,GAAGjL,MAAM,CAAC8K,kBAAkB,IAAI,IAAI,GAAG9K,MAAM,CAAC8K,kBAAkB,GAAG,QAAQ;IAClG,MAAMI,kBAAkB,GAAGjB,qDAAY,CAACkB,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACpN,KAAK,KAAKiN,iBAAiB,CAAC;IAEtF,oBACEhP,0DAAA,cACGE,mEAAiB,CAACgJ,MAAM,CAACC,OAAO,CAACmG,wBAAwB,KAAK,KAAK,gBAEhEtP,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,MAAW,CAAC,eACnBA,0DAAA;MACEgC,IAAI,EAAC,MAAM;MACXD,KAAK,EAAEgC,MAAM,CAACV,IAAI,IAAI,EAAG;MACzBuB,QAAQ,EAAGuH,CAAC,IAAKvH,QAAQ,CAAC;QAAExB,GAAG,EAAEW,MAAM,CAACX,GAAG;QAAEC,IAAI,EAAE8I,CAAC,CAACjL,MAAM,CAACa;MAAM,CAAC;IAAE,CACtE,CACE,CAAC,gBAEN/B,0DAAA,YAAM,CAAC,eACXA,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,sCAA2C,CAAC,eACnDA,0DAAA;MACEgC,IAAI,EAAC,UAAU;MAACuN,OAAO,EAAExL,MAAM,CAAC8K,kBAAkB,IAAI,IAAK;MAC3DjK,QAAQ,EAAGuH,CAAC,IAAK;QACfvH,QAAQ,CAAC;UACPxB,GAAG,EAAEW,MAAM,CAACX,GAAG;UACfyL,kBAAkB,EAAE1C,CAAC,CAACjL,MAAM,CAACqO,OAAO,KAAK,KAAK,GAAG,IAAI,GAAG;QAC1D,CAAC,CAAC;MACJ;IAAE,CACH,CACE,CAAC,EACLxL,MAAM,CAAC8K,kBAAkB,IAAI,IAAI,iBAChC7O,0DAAA;MAAKmK,SAAS,EAAC;IAAY,gBACzBnK,0DAAA,gBAAO,OAAY,CAAC,eACpBA,0DAAA;MACE+B,KAAK,EAAEiN,iBAAkB;MACzBpK,QAAQ,EAAGuH,CAAC,IAAK;QACf,MAAMqD,QAAQ,GAAGrD,CAAC,CAACjL,MAAM,CAACa,KAAK;QAC/B6C,QAAQ,CAAC;UAAExB,GAAG,EAAEW,MAAM,CAACX,GAAG;UAAEyL,kBAAkB,EAAEW;QAAS,CAAC,CAAC;MAC7D;IAAE,GAEDxB,qDAAY,CAACyB,GAAG,CAAEN,GAAG,iBACpBnP,0DAAA;MAAQwE,GAAG,EAAE2K,GAAG,CAAC3K,GAAI;MAACzC,KAAK,EAAEoN,GAAG,CAACpN,KAAM;MAAC+C,KAAK,EAAEqK,GAAG,CAACpK;IAAK,GAAEoK,GAAG,CAACrK,KAAc,CAC7E,CACK,CAAC,eACT9E,0DAAA,aAAKiP,kBAAkB,CAAClK,IAAS,CAC9B,CAEJ,CAAC;EAEV;AACF;AAEA,iEAAe6K,eAAe;;;;;UCrF9B;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACN0C;AACY;AACR;AACI;AACd;AAEpC1P,mEAAmB,CAAC;EAClBwC,IAAI,EAAE,QAAQ;EACdsN,MAAM,EAAE,SAAS;EACjBtF,WAAW,EAAE,OAAO;EACpBuF,KAAK,EAAG9G,OAAO,IAAKjJ,gEAAgB,CAAC+N,yDAAa,EAAE9E,OAAO,CAAC;EAC5D+G,mBAAmB,EAAE,CAAC,gBAAgB,EAAE,oBAAoB,CAAC;EAC7DC,kBAAkB,EAAE;AACtB,CAAC,CAAC;AAEFjQ,yEAAuB,CAAC+N,aAAa,GAAGA,yDAAa;AACrD/N,yEAAyB,CAAC,QAAQ,EAAEkG,uDAAW,CAAC;AAEhDlG,0EAA0B,CAACE,6DAAiB,CAAC;AAC7CF,6EAA6B,CAAC0P,2DAAe,CAAC9K,KAAK,EAAE8K,2DAAe,EAAG7L,MAAM,IAAKA,MAAM,CAAChB,WAAW,KAAK,QAAQ,CAAC;AAElH7C,8EAA8B,CAACqF,IAAI,CAAExB,MAAM,IAAK;EAC9C,IAAIA,MAAM,CAAChB,WAAW,KAAK,QAAQ,EAAE;IACnC;EACF;EAEA,MAAM0F,KAAK,GAAG1E,MAAM,CAACrB,IAAI,CAACgG,KAAK,CAAC,GAAG,CAAC;EAEpC,IAAID,KAAK,CAACrH,MAAM,KAAK,CAAC,EAAE;IACtB;EACF;EAEA,MAAMmH,SAAS,GAAGE,KAAK,CAACA,KAAK,CAACrH,MAAM,GAAG,CAAC,CAAC;EAEzC,QAAQmH,SAAS;IACf,KAAK,MAAM;MAAE,OAAO,UAAU;IAC9B,KAAK,KAAK;IACV,KAAK,MAAM;IACX,KAAK,KAAK;IACV,KAAK,KAAK;IACV,KAAK,KAAK;MAAE,OAAO,WAAW;IAC9B,KAAK,IAAI;MAAE,OAAOxE,MAAM,CAACsK,cAAc,GAAG,SAAS,GAAG,QAAQ;IAC9D,KAAK,KAAK;MAAE,OAAO,SAAS;IAC5B;MAAS,OAAO,YAAY;EAC9B;AACF,CAAC,CAAC;AAEFnO,8EAA8B,CAACqF,IAAI,CAAC;EAClCvD,IAAI,EAAE9B,+EAA6B,CAACyQ,IAAI;EACxC,MAAMC,OAAOA,CAAAC,IAAA,EAIV;IAAA,IAJY;MACbC,WAAW;MACXC,eAAe;MACfC;IACF,CAAC,GAAAH,IAAA;IACC,MAAM1P,KAAK,GAAG2P,WAAW,CAAC3P,KAAK;IAE/B,MAAM8P,UAAU,GAAG;MACjBC,OAAO,EAAE;IACX,CAAC;IAED,IAAIH,eAAe,IAAIA,eAAe,CAACI,qBAAqB,EAAE;MAC5DF,UAAU,CAACC,OAAO,GAAGH,eAAe,CAACI,qBAAqB,CAACD,OAAO;IACpE;IAEA,MAAME,MAAM,GAAG,EAAE;IAEjB,KAAK,MAAM1P,IAAI,IAAIP,KAAK,EAAE;MACxB,IACE,QAAQ,CAACkQ,IAAI,CAAC3P,IAAI,CAACgB,IAAI,CAAC,IACxB,cAAc,CAAC2O,IAAI,CAAC3P,IAAI,CAACgB,IAAI,CAAC,EAC9B;QACA;MACF;MAEA,IAAI;QACF,MAAM4O,SAAS,GAAG,MAAM,IAAI5L,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACvD,MAAM2L,QAAQ,GAAG7P,IAAI,CAACgB,IAAI;UAC1B,MAAMf,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;UAE/BD,MAAM,CAACE,SAAS,GAAG,YAAY;YAC7B8D,OAAO,CAAC;cACNjD,IAAI,EAAE6O,QAAQ;cACdjP,OAAO,EAAEX,MAAM,CAACY,MAAM,CAACC,SAAS,CAACb,MAAM,CAACY,MAAM,CAACE,OAAO,CAAC,SAAS,CAAC,GAAG,SAAS,CAACrB,MAAM;YACtF,CAAC,CAAC;UACJ,CAAC;UAEDO,MAAM,CAAC4B,OAAO,GAAG,YAAY;YAC3B,MAAMC,MAAM,GAAI,wCAAuC+N,QAAS,GAAE;YAClE3L,MAAM,CAACpC,MAAM,CAAC;UAChB,CAAC;UAED7B,MAAM,CAACgC,aAAa,CAACjC,IAAI,CAAC;QAC5B,CAAC,CAAC;QAEF,IAAIuP,UAAU,CAACC,OAAO,IAAI,IAAI,EAAE;UAC9BI,SAAS,CAACE,MAAM,GAAG;YACjBN,OAAO,EAAED,UAAU,CAACC;UACtB,CAAC;QACH;QAEA,MAAMvO,QAAQ,GAAG,MAAMzC,0DAAU,CAAC2C,IAAI,CAAC,eAAe,EAAE;UACtDC,IAAI,EAAEwO;QACR,CAAC,EAAE,IAAI,CAAC;QAER3O,QAAQ,CAACI,WAAW,GAAG,QAAQ;QAE/B7C,wEAAwB,CAACyC,QAAQ,CAAC;QAClCzC,8DAAc,CAACkC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEM,QAAQ,CAAC,CAAC;;QAE3C;QACA8L,UAAU,CAAC,MAAM;UACfvO,qEAAqB,CAAC;YAAEgR,OAAO,EAAEvO,QAAQ,CAACuO;UAAQ,CAAC,EAAE,KAAK,EAAE;YAAEQ,OAAO,EAAE,IAAI;YAAEC,IAAI,EAAE;UAAM,CAAC,CAAC;QAC7F,CAAC,EAAE,GAAG,CAAC;MACT,CAAC,CAAC,OAAO1Q,CAAC,EAAE;QACVmQ,MAAM,CAAC7L,IAAI,CAACtE,CAAC,CAAC;MAChB;IACF;IAEA+P,YAAY,CAAC,CAAC;IAEd,IAAII,MAAM,CAAChQ,MAAM,GAAG,CAAC,EAAE;MACrB,MAAMwQ,mBAAmB,GAAG,IAAInO,KAAK,CAAE,kCAAiCtC,KAAK,CAACC,MAAM,GAAG,CAAC,GAAG,gBAAgB,GAAG,EAAG,QAAOgQ,MAAM,CAAC3B,GAAG,CAAExO,CAAC,IAAKA,CAAC,CAAC+G,OAAO,CAAC,CAAC6J,IAAI,CAAC,IAAI,CAAE,EAAC,CAAC;MAClK3R,gEAAgB,CAAC0R,mBAAmB,CAAC;IACvC;EACF;AACF,CAAC,CAAC,C","sources":["webpack://@jsreport/jsreport-assets/external var \"Studio.libraries['react']\"","webpack://@jsreport/jsreport-assets/external var \"Studio\"","webpack://@jsreport/jsreport-assets/./studio/AssetUploadButton.js","webpack://@jsreport/jsreport-assets/../../node_modules/react-copy-to-clipboard/lib/index.js","webpack://@jsreport/jsreport-assets/../../node_modules/copy-to-clipboard/index.js","webpack://@jsreport/jsreport-assets/../../node_modules/toggle-selection/index.js","webpack://@jsreport/jsreport-assets/./studio/scopeOptions.js","webpack://@jsreport/jsreport-assets/./studio/AssetEditor.js","webpack://@jsreport/jsreport-assets/external var \"Studio.libraries['superagent']\"","webpack://@jsreport/jsreport-assets/../../node_modules/react-copy-to-clipboard/lib/Component.js","webpack://@jsreport/jsreport-assets/./studio/AssetEditor.css?9f21","webpack://@jsreport/jsreport-assets/./studio/NewAssetModal.js","webpack://@jsreport/jsreport-assets/./studio/AssetProperties.js","webpack://@jsreport/jsreport-assets/webpack/bootstrap","webpack://@jsreport/jsreport-assets/webpack/runtime/compat get default export","webpack://@jsreport/jsreport-assets/webpack/runtime/define property getters","webpack://@jsreport/jsreport-assets/webpack/runtime/hasOwnProperty shorthand","webpack://@jsreport/jsreport-assets/webpack/runtime/make namespace object","webpack://@jsreport/jsreport-assets/./studio/main_dev.js"],"sourcesContent":["module.exports = Studio.libraries['react'];","module.exports = Studio;","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nlet _fileUploadButton\n\nclass AssetUploadButton extends Component {\n  constructor (props) {\n    super(props)\n\n    this.inputFileRef = React.createRef()\n  }\n\n  // we need to have global action in main_dev which is triggered when users clicks on + on images\n  // this triggers invisible button in the toolbar\n  static OpenUpload (opts) {\n    _fileUploadButton.openFileDialog('edit', undefined, opts)\n  }\n\n  static OpenUploadNew (defaults, opts) {\n    _fileUploadButton.openFileDialog('new', defaults, opts)\n  }\n\n  componentDidMount () {\n    _fileUploadButton = this\n  }\n\n  upload (e) {\n    if (!e.target.files.length) {\n      return\n    }\n\n    const assetDefaults = e.target.assetDefaults\n    const targetAsset = e.target.targetAsset\n    const activateNewTab = e.target.activateNewTab\n    const onNewEntityCallback = e.target.onNewEntityCallback\n    const uploadCallback = e.target.uploadCallback\n\n    delete e.target.assetDefaults\n    delete e.target.targetAsset\n    delete e.target.uploadCallback\n\n    const file = e.target.files[0]\n    const reader = new FileReader()\n\n    reader.onloadend = async () => {\n      this.inputFileRef.current.value = ''\n\n      if (this.type === 'new') {\n        if (Studio.workspaces) {\n          await Studio.workspaces.save()\n        }\n\n        let asset = {}\n\n        if (assetDefaults != null) {\n          asset = Object.assign(asset, assetDefaults)\n        }\n\n        asset = Object.assign(asset, {\n          content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\n          name: file.name\n        })\n\n        const response = await Studio.api.post('/odata/assets', {\n          data: asset\n        })\n\n        response.__entitySet = 'assets'\n\n        Studio.addExistingEntity(response)\n        Studio.openTab(Object.assign({}, response), activateNewTab)\n\n        if (onNewEntityCallback) {\n          onNewEntityCallback(response)\n        }\n      }\n\n      if (this.type === 'edit') {\n        if (Studio.workspaces) {\n          Studio.updateEntity({\n            name: targetAsset.name,\n            content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length)\n          })\n\n          await Studio.workspaces.save()\n        } else {\n          await Studio.api.patch(`/odata/assets(${targetAsset._id})`, {\n            data: {\n              content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length),\n              link: null\n            }\n          })\n          Studio.loadEntity(targetAsset._id, true)\n        }\n      }\n\n      if (uploadCallback) {\n        uploadCallback()\n      }\n    }\n\n    reader.onerror = function () {\n      const errMsg = 'There was an error reading the file!'\n\n      if (uploadCallback) {\n        uploadCallback(new Error(errMsg))\n      }\n\n      alert(errMsg)\n    }\n\n    reader.readAsDataURL(file)\n  }\n\n  openFileDialog (type, defaults, opts = {}) {\n    const targetAssetIdAndName = opts.targetAsset\n\n    this.type = type\n\n    if (opts.activateNewTab != null) {\n      this.inputFileRef.current.activateNewTab = opts.activateNewTab\n    } else {\n      delete this.inputFileRef.current.activateNewTab\n    }\n\n    if (defaults) {\n      this.inputFileRef.current.assetDefaults = defaults\n    } else {\n      delete this.inputFileRef.current.assetDefaults\n    }\n\n    if (targetAssetIdAndName) {\n      this.inputFileRef.current.targetAsset = targetAssetIdAndName\n    } else if (type !== 'new') {\n      this.inputFileRef.current.targetAsset = {\n        _id: this.props.tab.entity._id,\n        name: this.props.tab.entity.name\n      }\n    }\n\n    if (opts.onNewEntityCallback) {\n      this.inputFileRef.current.onNewEntityCallback = opts.onNewEntityCallback\n    } else {\n      delete this.inputFileRef.current.onNewEntityCallback\n    }\n\n    if (opts.uploadCallback) {\n      this.inputFileRef.current.uploadCallback = opts.uploadCallback\n    } else {\n      delete this.inputFileRef.current.uploadCallback\n    }\n\n    this.inputFileRef.current.dispatchEvent(new MouseEvent('click', {\n      view: window,\n      bubbles: false,\n      cancelable: true\n    }))\n  }\n\n  renderUpload () {\n    return (\n      <input\n        type='file'\n        key='file'\n        ref={this.inputFileRef}\n        style={{ display: 'none' }}\n        onChange={(e) => this.upload(e)}\n      />\n    )\n  }\n\n  render () {\n    return this.renderUpload(true)\n  }\n}\n\nexport default AssetUploadButton\n","\"use strict\";\n\nvar _require = require('./Component'),\n    CopyToClipboard = _require.CopyToClipboard;\n\nCopyToClipboard.CopyToClipboard = CopyToClipboard;\nmodule.exports = CopyToClipboard;","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"⌘\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","export default [{\n  key: 'global',\n  title: 'global',\n  value: 'global',\n  desc: 'helpers in the asset will be attached to all templates'\n}, {\n  key: 'folder',\n  title: 'folder',\n  value: 'folder',\n  desc: 'helpers in the asset will be attached to all templates in the same folder hierarchy'\n}]\n","import React, { Component } from 'react'\nimport AssetUploadButton from './AssetUploadButton.js'\nimport Studio, { templateEditorModeResolvers, SplitPane, FramePreview, TextEditor } from 'jsreport-studio'\nimport superagent from 'superagent'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport binaryExtensions from 'binary-extensions'\nimport style from './AssetEditor.css'\n\nbinaryExtensions.push('p12')\n\n// Studio.api currently always open dialogs on failures and that is what we don't want, so arbitrary implementation here\nconst getTextFromApi = (path) => {\n  return new Promise((resolve, reject) => {\n    const request = superagent.get(Studio.resolveUrl(path))\n    request.end((err, { text } = {}) => err ? reject(new Error(text || err.toString())) : resolve(text))\n  })\n}\n\nclass AssetEditor extends Component {\n  constructor (props) {\n    super(props)\n\n    let defaultCodeActive = false\n\n    if (props.codeEntity != null && props.initialCodeActive != null) {\n      defaultCodeActive = props.initialCodeActive\n    }\n\n    this.state = {\n      initialLoading: true,\n      codeActive: defaultCodeActive,\n      previewOpen: false,\n      previewLoading: false\n    }\n\n    this.previewLoadFinish = this.previewLoadFinish.bind(this)\n  }\n\n  async componentDidMount () {\n    const { entity } = this.props\n\n    if (!entity) {\n      return this.setState({\n        initialLoading: false\n      })\n    }\n\n    let content = entity.content\n\n    if (entity.link) {\n      await Studio.saveEntity(entity._id)\n      const ab = await Studio.api.get(`assets/${entity._id}/content`, { responseType: 'arraybuffer' })\n      const str = String.fromCharCode.apply(null, new Uint8Array(ab))\n      const fixedStr = decodeURIComponent(escape(str))\n      content = btoa(unescape(encodeURIComponent(fixedStr)))\n    }\n\n    this.setState({ content, initialLoading: false })\n  }\n\n  async componentDidUpdate (prevProps) {\n    const { entity } = this.props\n\n    if (!entity) {\n      return\n    }\n\n    if (entity.link && (!this.state.link || prevProps.entity.link !== entity.link)) {\n      try {\n        const link = await getTextFromApi(`assets/link/${encodeURIComponent(entity.link)}`)\n        this.setState({ link: link })\n      } catch (e) {\n        this.setState({ link: e.message })\n      }\n    }\n  }\n\n  isOfficeFile (entity) {\n    if (entity == null) { return false }\n    return entity.name.match(/\\.(docx|xlsx|pptx)$/) != null\n  }\n\n  isImage (entity) {\n    if (entity == null) { return false }\n    return entity.name.match(/\\.(jpeg|jpg|gif|png|svg)$/) != null\n  }\n\n  isFont (entity) {\n    if (entity == null) { return false }\n    return entity.name.match(/\\.(otf|woff|ttf|eot|woff2)$/) != null\n  }\n\n  isPdf (entity) {\n    if (entity == null) { return false }\n    return entity.name.match(/\\.(pdf)$/) != null\n  }\n\n  getFormat (extension) {\n    switch (extension) {\n      case 'ttf': return 'truetype'\n      case 'woff2': return 'woff2'\n      case 'eot': return 'embedded-opentype'\n      default: return 'woff'\n    }\n  }\n\n  getEmbeddingCode (entity) {\n    if (entity == null) { return '' }\n\n    const parts = entity.name.split('.')\n    const extension = parts[parts.length - 1]\n\n    if (this.props.embeddingCode != null) {\n      return this.props.embeddingCode\n    }\n\n    if (this.isImage(entity)) {\n      return `<img src=\"{{asset \"${Studio.resolveEntityPath(entity)}\" \"dataURI\"}}\" />`\n    }\n\n    if (this.isFont(entity)) {\n      return `@font-face {\n  font-family: '${parts[0]}';\n  src: url({{asset \"${Studio.resolveEntityPath(entity)}\" \"dataURI\"}});\n  format('${this.getFormat(extension)}');\n}`\n    }\n\n    if (this.isOfficeFile(entity)) {\n      return `{{asset \"${Studio.resolveEntityPath(entity)}\" \"base64\"}}`\n    }\n\n    return `{{asset \"${Studio.resolveEntityPath(entity)}\"}}`\n  }\n\n  getLazyPreviewStatus (entity) {\n    if (this.props.lazyPreview != null) {\n      return this.props.lazyPreview\n    }\n\n    if (this.isOfficeFile(entity)) {\n      return true\n    }\n\n    return false\n  }\n\n  getPreviewEnabledStatus (entity) {\n    if (this.props.previewEnabled != null) {\n      return this.props.previewEnabled\n    }\n\n    if (this.isOfficeFile(entity)) {\n      return Studio.extensions.assets.options.officePreview.enabled !== false\n    }\n\n    return true\n  }\n\n  preview (entity) {\n    const { previewOpen } = this.state\n    const { onPreview } = this.props\n    const lazyPreview = this.getLazyPreviewStatus(entity)\n    const previewEnabled = this.getPreviewEnabledStatus(entity)\n\n    if (!lazyPreview || !previewEnabled) {\n      return\n    }\n\n    if (onPreview) {\n      onPreview(entity)\n    } else if (this.isOfficeFile(entity)) {\n      if (\n        Studio.extensions.assets.options.officePreview.showWarning !== false &&\n        Studio.getSettingValueByKey('office-preview-informed', false) === false\n      ) {\n        Studio.setSetting('office-preview-informed', true)\n\n        Studio.openModal(() => (\n          <div>\n            We need to upload your office asset to our publicly hosted server to be able to use\n            Office Online Service for previewing here in the studio. You can disable it in the configuration, see\n            <a\n              href='https://jsreport.net/learn/xlsx#preview-in-studio' target='_blank' rel='noopener noreferrer'\n            >\n              the docs for details\n            </a>.\n          </div>\n        ))\n      }\n    }\n\n    if (previewOpen) {\n      this.clearPreview(() => {\n        this.preview(entity)\n      })\n    } else {\n      Studio.startProgress()\n\n      this.setState({\n        previewLoading: true,\n        previewOpen: true,\n        codeActive: false\n      })\n    }\n  }\n\n  previewLoadFinish () {\n    Studio.stopProgress()\n\n    this.setState({\n      previewLoading: false\n    })\n  }\n\n  clearPreview (done) {\n    this.setState({\n      previewOpen: false\n    }, () => done && done())\n  }\n\n  renderBinary (entity) {\n    return (\n      <div className='custom-editor'>\n        <div>\n          <h1><i className='fa fa-file-o' /> {entity.name}</h1>\n        </div>\n        <div>\n          <a className='button confirmation' rel='noreferrer' target='_blank' href={Studio.resolveUrl(`assets/${entity._id}/content?download=true`)} title='Download'>\n            <i className='fa fa-download' /> Download\n          </a>\n          <button className='button confirmation' onClick={() => AssetUploadButton.OpenUpload()}>\n            <i className='fa fa-upload' /> Upload\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  renderEditorToolbar () {\n    const { link, previewLoading, previewOpen, codeActive } = this.state\n    const { entity, codeEntity, displayName, icon, onDownload, onUpload } = this.props\n    const lazyPreview = this.getLazyPreviewStatus(entity)\n    const previewEnabled = this.getPreviewEnabledStatus(entity)\n    const embeddingCode = this.getEmbeddingCode(entity)\n\n    let visibleName = displayName\n\n    if (!visibleName && entity) {\n      visibleName = entity.name\n    }\n\n    if (!visibleName) {\n      visibleName = '<none>'\n    }\n\n    return (\n      <div className={style.toolbarContainer}>\n        <div className={style.toolbarRow}>\n          <h3 className={style.toolbarAssetName}>\n            <div>\n              <i className={`fa ${icon}`} />\n              &nbsp;\n              {entity != null ? <a href='#' onClick={(ev) => { ev.preventDefault(); Studio.openTab({ _id: entity._id }) }}>{visibleName}</a> : visibleName}\n            </div>\n          </h3>\n          {embeddingCode !== '' && (\n            <CopyToClipboard text={embeddingCode}>\n              <a className='button confirmation' title='Copy the embedding code to clipboard'>\n                <i className='fa fa-clipboard' />\n              </a>\n            </CopyToClipboard>\n          )}\n          {entity != null && (\n            <button\n              className='button confirmation'\n              title='Download'\n              onClick={() => {\n                if (onDownload) {\n                  onDownload(entity)\n                } else {\n                  const downloadEl = document.createElement('a')\n                  downloadEl.target = '_blank'\n                  downloadEl.href = Studio.resolveUrl(`assets/${entity._id}/content?download=true`)\n                  downloadEl.click()\n                }\n              }}\n            >\n              <i className='fa fa-download' />\n            </button>\n          )}\n          {entity != null && !entity.link && (\n            <button\n              className='button confirmation'\n              title='Upload'\n              onClick={() => {\n                const cb = () => {\n                  let wasOpen = false\n\n                  if (lazyPreview && this.state.previewOpen) {\n                    wasOpen = true\n                  }\n\n                  this.clearPreview(() => {\n                    if (wasOpen) {\n                      this.preview(entity)\n                    }\n                  })\n                }\n\n                if (onUpload) {\n                  onUpload(entity, cb)\n                } else {\n                  AssetUploadButton.OpenUpload({\n                    targetAsset: {\n                      _id: entity._id,\n                      name: entity.name\n                    },\n                    uploadCallback: cb\n                  })\n                }\n              }}\n            >\n              <i className='fa fa-upload' />\n            </button>\n          )}\n          {lazyPreview && entity != null && (\n            <button\n              className={`button confirmation ${!previewEnabled || previewLoading ? 'disabled' : ''}`}\n              onClick={() => this.preview(entity)}\n              title={previewOpen ? 'Refresh' : 'Preview'}\n            >\n              <i className={`fa fa-${previewLoading ? '' : previewOpen ? 'retweet' : 'eye'}`} /> {previewLoading ? 'Loading..' : ''}\n            </button>\n          )}\n          {lazyPreview && entity != null && previewOpen && !previewLoading && (\n            <button\n              className={`button confirmation ${!previewEnabled || previewLoading ? 'disabled' : ''}`}\n              onClick={() => this.clearPreview()}\n              title='Clear'\n            >\n              <i className='fa fa-times' />\n            </button>\n          )}\n          {codeEntity != null && (\n            <button\n              className={`button ${codeActive ? 'danger' : 'confirmation'}`}\n              onClick={() => this.setState((state) => {\n                const change = {}\n\n                if (state.codeActive) {\n                  Studio.store.dispatch(Studio.entities.actions.flushUpdates())\n                } else {\n                  change.previewOpen = false\n                  change.previewLoading = false\n                  Studio.stopProgress()\n                }\n\n                return { codeActive: !state.codeActive, ...change }\n              })}\n              title={`${codeActive ? 'Hide' : 'Show'} ${codeEntity.content != null ? 'content and helpers' : 'helpers'}`}\n            >\n              <i className='fa fa-code' />\n            </button>\n          )}\n        </div>\n        {entity != null && entity.link && (\n          <div className={style.toolbarRow} style={{ margin: '0.6rem' }}>\n            <span><b><i className='fa fa-folder-open' /> linked to file:</b> {link}</span>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  renderEditorContent () {\n    const { entity, codeEntity, emptyMessage, getPreviewContent, onUpdate } = this.props\n    const { codeActive } = this.state\n\n    if (codeEntity != null && codeActive) {\n      const helpersEditor = (\n        <TextEditor\n          key={codeEntity._id + '_helpers'}\n          name={codeEntity._id + '_helpers'}\n          getFilename={() => `${codeEntity.name} (helpers)`}\n          mode='javascript'\n          onUpdate={(v) => onUpdate(Object.assign({ _id: codeEntity._id }, { helpers: v }))}\n          value={codeEntity.helpers || ''}\n        />\n      )\n\n      if (Object.prototype.hasOwnProperty.call(codeEntity, 'content')) {\n        return (\n          <SplitPane\n            primary='second'\n            split='horizontal'\n            resizerClassName='resizer-horizontal'\n            defaultSize={(window.innerHeight * 0.2) + 'px'}\n          >\n            <TextEditor\n              key={codeEntity._id}\n              name={codeEntity._id}\n              getFilename={() => codeEntity.name}\n              mode={resolveTemplateEditorMode(codeEntity) || 'handlebars'}\n              onUpdate={(v) => onUpdate(Object.assign({ _id: codeEntity._id }, { content: v }))}\n              value={codeEntity.content || ''}\n            />\n            {helpersEditor}\n          </SplitPane>\n        )\n      }\n\n      return helpersEditor\n    }\n\n    if (entity == null) {\n      return (\n        <div style={{ padding: '2rem' }}>\n          <i>{emptyMessage != null ? emptyMessage : 'Asset is empty'}</i>\n        </div>\n      )\n    }\n\n    const parts = entity.name.split('.')\n    const extension = parts[parts.length - 1]\n    const lazyPreview = this.getLazyPreviewStatus(entity)\n\n    let previewOpen = true\n\n    if (lazyPreview) {\n      previewOpen = this.state.previewOpen\n    }\n\n    if (!previewOpen) {\n      return null\n    }\n\n    if (getPreviewContent) {\n      return getPreviewContent(entity, {\n        previewLoadFinish: this.previewLoadFinish\n      })\n    }\n\n    if (this.isImage(entity)) {\n      return (\n        <div style={{ overflow: 'auto' }}>\n          <img\n            src={Studio.resolveUrl(`assets/${entity._id}/content?v=${new Date().getTime()}`)}\n            style={{ display: 'block', margin: '3rem auto' }}\n          />\n        </div>\n      )\n    }\n\n    if (this.isFont(entity)) {\n      const newStyle = document.createElement('style')\n\n      newStyle.appendChild(document.createTextNode(`@font-face {\n         font-family: '${parts[0]}';\n         src: url('${Studio.resolveUrl(`/assets/${entity._id}/content`)}');\n         format('${extension === 'ttf' ? 'truetype' : 'woff'}');\n        }`))\n\n      document.head.appendChild(newStyle)\n\n      return (\n        <div style={{ overflow: 'auto', fontFamily: parts[0], padding: '2rem' }}><h1> Hello world font {entity.name}</h1>\n          <p>\n            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's\n            standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to\n            make a type specimen book.\n          </p>\n        </div>\n      )\n    }\n\n    if (this.isPdf(entity)) {\n      return (\n        <div className='block' style={{ height: '100%' }}>\n          <object style={{ height: '100%' }} data={Studio.resolveUrl(`assets/${entity._id}/content?v=${new Date().getTime()}`)} type='application/pdf'>\n            <embed src={Studio.resolveUrl(`assets/${entity._id}/content?v=${new Date().getTime()}`)} type='application/pdf' />\n          </object>\n        </div>\n      )\n    }\n\n    if (this.isOfficeFile(entity)) {\n      const officeSrc = Studio.resolveUrl(`assets/office/${entity._id}/content`)\n\n      return (\n        <FramePreview\n          onLoad={() => this.previewLoadFinish()}\n          src={officeSrc}\n        />\n      )\n    }\n\n    if (entity.name.split('.').length > 1 && binaryExtensions.includes(entity.name.split('.')[1])) {\n      return this.renderBinary(entity)\n    }\n\n    let mode = parts[parts.length - 1]\n\n    if (extension === 'js') {\n      mode = 'javascript'\n    }\n\n    if (extension === 'html') {\n      mode = 'handlebars'\n    }\n\n    const content = ((entity.content || entity.forceUpdate) ? entity.content : this.state.content) || ''\n    let text\n    try {\n      text = decodeURIComponent(escape(atob(content)))\n    } catch (e) {\n      return this.renderBinary(entity)\n    }\n\n    return (\n      <TextEditor\n        name={entity._id}\n        mode={mode}\n        value={text}\n        onUpdate={(v) => this.props.onUpdate(Object.assign({}, entity, { content: btoa(unescape(encodeURIComponent(v))), forceUpdate: true }))}\n      />\n    )\n  }\n\n  render () {\n    const { initialLoading } = this.state\n\n    if (initialLoading) {\n      return <div />\n    }\n\n    return (\n      <div className='block'>\n        {this.renderEditorToolbar()}\n        {this.renderEditorContent()}\n      </div>\n    )\n  }\n}\n\nAssetEditor.defaultProps = {\n  icon: 'fa-file-o'\n}\n\nfunction resolveTemplateEditorMode (template) {\n  // eslint-disable-next-line\n  for (const k in templateEditorModeResolvers) {\n    const mode = templateEditorModeResolvers[k](template)\n    if (mode) {\n      return mode\n    }\n  }\n\n  return null\n}\n\nexport default AssetEditor\n","module.exports = Studio.libraries['superagent'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CopyToClipboard = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _copyToClipboard = _interopRequireDefault(require(\"copy-to-clipboard\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar CopyToClipboard =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(CopyToClipboard, _React$PureComponent);\n\n  function CopyToClipboard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CopyToClipboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CopyToClipboard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event) {\n      var _this$props = _this.props,\n          text = _this$props.text,\n          onCopy = _this$props.onCopy,\n          children = _this$props.children,\n          options = _this$props.options;\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      var result = (0, _copyToClipboard[\"default\"])(text, options);\n\n      if (onCopy) {\n        onCopy(text, result);\n      } // Bypass onClick if it was present\n\n\n      if (elem && elem.props && typeof elem.props.onClick === 'function') {\n        elem.props.onClick(event);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(CopyToClipboard, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          _text = _this$props2.text,\n          _onCopy = _this$props2.onCopy,\n          _options = _this$props2.options,\n          children = _this$props2.children,\n          props = _objectWithoutProperties(_this$props2, [\"text\", \"onCopy\", \"options\", \"children\"]);\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      return _react[\"default\"].cloneElement(elem, _objectSpread({}, props, {\n        onClick: this.onClick\n      }));\n    }\n  }]);\n\n  return CopyToClipboard;\n}(_react[\"default\"].PureComponent);\n\nexports.CopyToClipboard = CopyToClipboard;\n\n_defineProperty(CopyToClipboard, \"defaultProps\", {\n  onCopy: undefined,\n  options: undefined\n});","// extracted by mini-css-extract-plugin\nexport default {\"toolbarContainer\":\"x-assets-AssetEditor-toolbarContainer\",\"toolbarRow\":\"x-assets-AssetEditor-toolbarRow\",\"toolbarAssetName\":\"x-assets-AssetEditor-toolbarAssetName\"};","import React, { Component } from 'react'\nimport scopeOptions from './scopeOptions'\nimport AssetUploadButton from './AssetUploadButton'\nimport Studio from 'jsreport-studio'\n\nclass NewAssetModal extends Component {\n  constructor () {\n    super()\n\n    this.nameRef = React.createRef()\n    this.linkRef = React.createRef()\n    this.state = { isLink: false, isSharedHelper: false, scope: null }\n  }\n\n  handleKeyPress (e) {\n    if (e.key === 'Enter') {\n      this.createAsset()\n    }\n  }\n\n  // the modal component for some reason after open focuses the panel itself\n  componentDidMount () {\n    setTimeout(() => this.nameRef.current.focus(), 0)\n  }\n\n  async createAsset (e) {\n    let entity = {}\n\n    if (!this.state.isLink && (!this.nameRef.current.value || this.nameRef.current.value.indexOf('.')) < 0) {\n      return this.setState({ error: 'name should include file extension, for example foo.js' })\n    }\n\n    if (this.props.options.defaults != null) {\n      entity = Object.assign(entity, this.props.options.defaults)\n    }\n\n    if (this.state.isLink) {\n      entity.link = this.linkRef.current.value\n      const fragments = entity.link.split('/')\n      entity.name = fragments[fragments.length - 1]\n    } else {\n      entity.name = this.nameRef.current.value\n    }\n\n    if (this.state.isSharedHelper) {\n      entity.sharedHelpersScope = this.state.scope\n    } else {\n      entity.sharedHelpersScope = null\n    }\n\n    try {\n      if (Studio.workspaces) {\n        await Studio.workspaces.save()\n      }\n\n      const response = await Studio.api.post('/odata/assets', {\n        data: entity\n      })\n      response.__entitySet = 'assets'\n\n      Studio.addExistingEntity(response)\n      Studio.openTab(response, this.props.options.activateNewTab)\n\n      if (this.props.options.onNewEntity) {\n        this.props.options.onNewEntity(response)\n      }\n\n      this.props.close()\n    } catch (e) {\n      this.setState({ error: e.message })\n    }\n  }\n\n  render () {\n    const { isLink, isSharedHelper, scope, error } = this.state\n\n    const currentScopeValue = scope != null ? scope : 'global'\n    const currentScopeOption = scopeOptions.find((opt) => opt.value === currentScopeValue)\n\n    return (\n      <div>\n        <div className='form-group'>\n          <label>New asset</label>\n        </div>\n        {isLink\n          ? (\n            <div className='form-group'>\n              <label>relative or absolute path to existing file</label>\n              <input\n                type='text'\n                name='link'\n                ref={this.linkRef}\n              />\n            </div>\n            )\n          : (\n            <div className='form-group'>\n              <label>name</label>\n              <input\n                type='text'\n                name='name'\n                ref={this.nameRef}\n                placeholder='styles.css'\n                onKeyPress={(e) => this.handleKeyPress(e)}\n              />\n            </div>\n            )}\n        {Studio.extensions.assets.options.allowAssetsLinkedToFiles !== false\n          ? (\n            <div className='form-group'>\n              <label>link to existing file</label>\n              <input\n                type='checkbox' checked={isLink}\n                onChange={() => this.setState({ isLink: !isLink })}\n              />\n            </div>\n            )\n          : <div />}\n        <div className='form-group'>\n          <label>shared helpers attached to templates</label>\n          <input\n            type='checkbox' checked={isSharedHelper === true}\n            onChange={(v) => {\n              this.setState({\n                isSharedHelper: v.target.checked,\n                scope: v.target.checked === false ? null : 'global'\n              })\n            }}\n          />\n        </div>\n        {isSharedHelper && (\n          <div className='form-group'>\n            <label>scope</label>\n            <select\n              value={currentScopeValue}\n              onChange={(v) => {\n                const newScope = v.target.value\n                this.setState({\n                  scope: newScope\n                })\n              }}\n            >\n              {scopeOptions.map((opt) => (\n                <option key={opt.key} value={opt.value} title={opt.desc}>{opt.title}</option>\n              ))}\n            </select>\n            <em>{currentScopeOption.desc}</em>\n          </div>\n        )}\n        <div className='form-group'>\n          <span\n            style={{ color: 'red', display: error ? 'block' : 'none' }}\n          >{error}\n          </span>\n        </div>\n        <div className='form-group' style={{ opacity: 0.8 }}>\n          <hr />\n          <span>You can use assets to embed any kind of static content into report template.<br />\n            This can be for example css style, image, font, html or even javascript shared helpers. <br />See the\n            <a target='_blank' rel='noreferrer' title='Help' href='http://jsreport.net/learn/assets'>documentation</a> for details.\n          </span>\n        </div>\n        <div className='button-bar'>\n          <button\n            className='button confirmation'\n            onClick={() => {\n              this.props.close()\n              AssetUploadButton.OpenUploadNew(this.props.options.defaults, {\n                activateNewTab: this.props.options.activateNewTab,\n                onNewEntityCallback: this.props.options.onNewEntity\n              })\n            }}\n          >Upload\n          </button>\n          <button onClick={() => this.createAsset()} className='button confirmation'>Ok</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default NewAssetModal\n","import React, { Component } from 'react'\nimport scopeOptions from './scopeOptions'\nimport Studio from 'jsreport-studio'\n\nclass AssetProperties extends Component {\n  static title (entity, entities) {\n    let suffix = entity.link ? ' (link)' : ''\n\n    if (entity.sharedHelpersScope != null) {\n      suffix += ` (shared helper, scope: ${entity.sharedHelpersScope})`\n    }\n\n    return `asset${suffix}`\n  }\n\n  componentDidMount () {\n    this.normalizeScope()\n  }\n\n  componentDidUpdate () {\n    this.normalizeScope()\n  }\n\n  normalizeScope () {\n    const { entity, onChange } = this.props\n\n    if (entity.isSharedHelper === true && entity.sharedHelpersScope == null) {\n      onChange({ _id: entity._id, sharedHelpersScope: 'global', isSharedHelper: false })\n    }\n  }\n\n  render () {\n    const { entity, onChange } = this.props\n\n    const currentScopeValue = entity.sharedHelpersScope != null ? entity.sharedHelpersScope : 'global'\n    const currentScopeOption = scopeOptions.find((opt) => opt.value === currentScopeValue)\n\n    return (\n      <div>\n        {Studio.extensions.assets.options.allowAssetsLinkedToFiles !== false\n          ? (\n            <div className='form-group'>\n              <label>link</label>\n              <input\n                type='text'\n                value={entity.link || ''}\n                onChange={(v) => onChange({ _id: entity._id, link: v.target.value })}\n              />\n            </div>\n            )\n          : <div />}\n        <div className='form-group'>\n          <label>shared helpers attached to templates</label>\n          <input\n            type='checkbox' checked={entity.sharedHelpersScope != null}\n            onChange={(v) => {\n              onChange({\n                _id: entity._id,\n                sharedHelpersScope: v.target.checked === false ? null : 'global'\n              })\n            }}\n          />\n        </div>\n        {entity.sharedHelpersScope != null && (\n          <div className='form-group'>\n            <label>scope</label>\n            <select\n              value={currentScopeValue}\n              onChange={(v) => {\n                const newScope = v.target.value\n                onChange({ _id: entity._id, sharedHelpersScope: newScope })\n              }}\n            >\n              {scopeOptions.map((opt) => (\n                <option key={opt.key} value={opt.value} title={opt.desc}>{opt.title}</option>\n              ))}\n            </select>\n            <em>{currentScopeOption.desc}</em>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default AssetProperties\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import AssetEditor from './AssetEditor.js'\nimport AssetUploadButton from './AssetUploadButton.js'\nimport NewAssetModal from './NewAssetModal.js'\nimport AssetProperties from './AssetProperties.js'\nimport Studio from 'jsreport-studio'\n\nStudio.addEntitySet({\n  name: 'assets',\n  faIcon: 'fa-file',\n  visibleName: 'asset',\n  onNew: (options) => Studio.openModal(NewAssetModal, options),\n  referenceAttributes: ['isSharedHelper', 'sharedHelpersScope'],\n  entityTreePosition: 700\n})\n\nStudio.sharedComponents.NewAssetModal = NewAssetModal\nStudio.addEditorComponent('assets', AssetEditor)\n\nStudio.addToolbarComponent(AssetUploadButton)\nStudio.addPropertiesComponent(AssetProperties.title, AssetProperties, (entity) => entity.__entitySet === 'assets')\n\nStudio.entityTreeIconResolvers.push((entity) => {\n  if (entity.__entitySet !== 'assets') {\n    return\n  }\n\n  const parts = entity.name.split('.')\n\n  if (parts.length === 1) {\n    return\n  }\n\n  const extension = parts[parts.length - 1]\n\n  switch (extension) {\n    case 'html': return 'fa-html5'\n    case 'jpg':\n    case 'jpeg':\n    case 'png':\n    case 'gif':\n    case 'svg': return 'fa-camera'\n    case 'js': return entity.isSharedHelper ? 'fa-cogs' : 'fa-cog'\n    case 'css': return 'fa-css3'\n    default: return 'fa-file-o '\n  }\n})\n\nStudio.entityTreeDropResolvers.push({\n  type: Studio.dragAndDropNativeTypes.FILE,\n  async handler ({\n    draggedItem,\n    dragOverContext,\n    dropComplete\n  }) {\n    const files = draggedItem.files\n\n    const targetInfo = {\n      shortid: null\n    }\n\n    if (dragOverContext && dragOverContext.containerTargetEntity) {\n      targetInfo.shortid = dragOverContext.containerTargetEntity.shortid\n    }\n\n    const errors = []\n\n    for (const file of files) {\n      if (\n        /\\.zip$/.test(file.name) ||\n        /\\.jsrexport$/.test(file.name)\n      ) {\n        continue\n      }\n\n      try {\n        const assetFile = await new Promise((resolve, reject) => {\n          const fileName = file.name\n          const reader = new FileReader()\n\n          reader.onloadend = async () => {\n            resolve({\n              name: fileName,\n              content: reader.result.substring(reader.result.indexOf('base64,') + 'base64,'.length)\n            })\n          }\n\n          reader.onerror = function () {\n            const errMsg = `There was an error reading the file \"${fileName}\"`\n            reject(errMsg)\n          }\n\n          reader.readAsDataURL(file)\n        })\n\n        if (targetInfo.shortid != null) {\n          assetFile.folder = {\n            shortid: targetInfo.shortid\n          }\n        }\n\n        const response = await Studio.api.post('/odata/assets', {\n          data: assetFile\n        }, true)\n\n        response.__entitySet = 'assets'\n\n        Studio.addExistingEntity(response)\n        Studio.openTab(Object.assign({}, response))\n\n        // delay the collapsing a bit to avoid showing ugly transition of collapsed -> uncollapsed\n        setTimeout(() => {\n          Studio.collapseEntity({ shortid: response.shortid }, false, { parents: true, self: false })\n        }, 200)\n      } catch (e) {\n        errors.push(e)\n      }\n    }\n\n    dropComplete()\n\n    if (errors.length > 0) {\n      const assetsUploadedError = new Error(`Could not complete asset upload${files.length > 1 ? ' of some files' : ''}.\\n\\n${errors.map((e) => e.message).join('\\n')}`)\n      Studio.apiFailed(assetsUploadedError)\n    }\n  }\n})\n"],"names":["React","Component","Studio","_fileUploadButton","AssetUploadButton","constructor","props","inputFileRef","createRef","OpenUpload","opts","openFileDialog","undefined","OpenUploadNew","defaults","componentDidMount","upload","e","target","files","length","assetDefaults","targetAsset","activateNewTab","onNewEntityCallback","uploadCallback","file","reader","FileReader","onloadend","current","value","type","workspaces","save","asset","Object","assign","content","result","substring","indexOf","name","response","api","post","data","__entitySet","addExistingEntity","openTab","updateEntity","patch","_id","link","loadEntity","onerror","errMsg","Error","alert","readAsDataURL","arguments","targetAssetIdAndName","tab","entity","dispatchEvent","MouseEvent","view","window","bubbles","cancelable","renderUpload","createElement","key","ref","style","display","onChange","render","title","desc","templateEditorModeResolvers","SplitPane","FramePreview","TextEditor","superagent","CopyToClipboard","binaryExtensions","push","getTextFromApi","path","Promise","resolve","reject","request","get","resolveUrl","end","err","text","toString","AssetEditor","defaultCodeActive","codeEntity","initialCodeActive","state","initialLoading","codeActive","previewOpen","previewLoading","previewLoadFinish","bind","setState","saveEntity","ab","responseType","str","String","fromCharCode","apply","Uint8Array","fixedStr","decodeURIComponent","escape","btoa","unescape","encodeURIComponent","componentDidUpdate","prevProps","message","isOfficeFile","match","isImage","isFont","isPdf","getFormat","extension","getEmbeddingCode","parts","split","embeddingCode","resolveEntityPath","getLazyPreviewStatus","lazyPreview","getPreviewEnabledStatus","previewEnabled","extensions","assets","options","officePreview","enabled","preview","onPreview","showWarning","getSettingValueByKey","setSetting","openModal","href","rel","clearPreview","startProgress","stopProgress","done","renderBinary","className","onClick","renderEditorToolbar","displayName","icon","onDownload","onUpload","visibleName","toolbarContainer","toolbarRow","toolbarAssetName","ev","preventDefault","downloadEl","document","click","cb","wasOpen","change","store","dispatch","entities","actions","flushUpdates","margin","renderEditorContent","emptyMessage","getPreviewContent","onUpdate","helpersEditor","getFilename","mode","v","helpers","prototype","hasOwnProperty","call","primary","resizerClassName","defaultSize","innerHeight","resolveTemplateEditorMode","padding","overflow","src","Date","getTime","newStyle","appendChild","createTextNode","head","fontFamily","height","officeSrc","onLoad","includes","forceUpdate","atob","defaultProps","template","k","scopeOptions","NewAssetModal","nameRef","linkRef","isLink","isSharedHelper","scope","handleKeyPress","createAsset","setTimeout","focus","error","fragments","sharedHelpersScope","onNewEntity","close","currentScopeValue","currentScopeOption","find","opt","placeholder","onKeyPress","allowAssetsLinkedToFiles","checked","newScope","map","color","opacity","AssetProperties","suffix","normalizeScope","addEntitySet","faIcon","onNew","referenceAttributes","entityTreePosition","sharedComponents","addEditorComponent","addToolbarComponent","addPropertiesComponent","entityTreeIconResolvers","entityTreeDropResolvers","dragAndDropNativeTypes","FILE","handler","_ref","draggedItem","dragOverContext","dropComplete","targetInfo","shortid","containerTargetEntity","errors","test","assetFile","fileName","folder","collapseEntity","parents","self","assetsUploadedError","join","apiFailed"],"sourceRoot":""}