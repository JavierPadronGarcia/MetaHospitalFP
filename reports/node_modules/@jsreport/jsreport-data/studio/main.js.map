{"version":3,"file":"main.js","mappings":";;;;;;AAAA;;;;;;ACAA;;;;;;;;;;;;;;;ACAwC;AACI;AAE5C,MAAMG,UAAU,SAASF,4CAAS,CAAC;EACjCG,MAAMA,CAAA,EAAI;IACR,MAAM;MAAEC,MAAM;MAAEC;IAAS,CAAC,GAAG,IAAI,CAACC,KAAK;IAEvC,oBACEP,0DAAA,CAACE,uDAAU;MACTO,IAAI,EAAEJ,MAAM,CAACK,GAAI;MACjBC,IAAI,EAAC,MAAM;MACXC,KAAK,EAAEP,MAAM,CAACQ,QAAQ,IAAI,EAAG;MAC7BP,QAAQ,EAAGQ,CAAC,IAAKR,QAAQ,CAACS,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEX,MAAM,EAAE;QAAEQ,QAAQ,EAAEC;MAAE,CAAC,CAAC;IAAE,CACvE,CAAC;EAEN;AACF;AAEA,iEAAeX,UAAU;;;;;;;;;;;;;;;;;AClBe;AACJ;AAEpC,MAAMe,eAAe,GAAGD,wEAAsB;AAC9C,MAAME,gBAAgB,GAAGF,yEAAuB;AAEhD,SAASG,eAAeA,CAAEC,QAAQ,EAAE;EAClC,OAAON,MAAM,CAACO,IAAI,CAACD,QAAQ,CAAC,CAACE,MAAM,CAAEC,CAAC,IAAKH,QAAQ,CAACG,CAAC,CAAC,CAACC,WAAW,KAAK,MAAM,CAAC,CAACC,GAAG,CAAEF,CAAC,IAAKH,QAAQ,CAACG,CAAC,CAAC,CAAC;AACxG;AAEe,MAAMG,UAAU,SAAS1B,4CAAS,CAAC;EAChD,OAAO2B,KAAKA,CAAEvB,MAAM,EAAEgB,QAAQ,EAAE;IAC9B,IAAI,CAAChB,MAAM,CAACwB,IAAI,IAAI,CAACxB,MAAM,CAACwB,IAAI,CAACC,OAAO,EAAE;MACxC,OAAO,MAAM;IACf;IAEA,MAAMC,UAAU,GAAGX,eAAe,CAACC,QAAQ,CAAC,CAACE,MAAM,CAAES,CAAC,IAAK3B,MAAM,CAACwB,IAAI,CAACC,OAAO,KAAKE,CAAC,CAACF,OAAO,CAAC;IAE7F,IAAI,CAACC,UAAU,CAACE,MAAM,EAAE;MACtB,OAAO,MAAM;IACf;IAEA,OAAO,eAAe,GAAGF,UAAU,CAAC,CAAC,CAAC,CAACtB,IAAI;EAC7C;EAEAyB,iBAAiBA,CAAA,EAAI;IACnB,IAAI,CAACC,2BAA2B,CAAC,CAAC;EACpC;EAEAC,kBAAkBA,CAAA,EAAI;IACpB,IAAI,CAACD,2BAA2B,CAAC,CAAC;EACpC;EAEAA,2BAA2BA,CAAA,EAAI;IAC7B,MAAM;MAAE9B,MAAM;MAAEgB,QAAQ;MAAEgB;IAAS,CAAC,GAAG,IAAI,CAAC9B,KAAK;IAEjD,IAAI,CAACF,MAAM,CAACwB,IAAI,EAAE;MAChB;IACF;IAEA,MAAMS,gBAAgB,GAAGvB,MAAM,CAACO,IAAI,CAACD,QAAQ,CAAC,CAACE,MAAM,CAAEC,CAAC,IAAKH,QAAQ,CAACG,CAAC,CAAC,CAACC,WAAW,KAAK,MAAM,IAAIJ,QAAQ,CAACG,CAAC,CAAC,CAACM,OAAO,KAAKzB,MAAM,CAACwB,IAAI,CAACC,OAAO,CAAC;IAE/I,IAAIQ,gBAAgB,CAACL,MAAM,KAAK,CAAC,EAAE;MACjCI,QAAQ,CAAC;QAAE3B,GAAG,EAAEL,MAAM,CAACK,GAAG;QAAEmB,IAAI,EAAE;MAAK,CAAC,CAAC;IAC3C;EACF;EAEAzB,MAAMA,CAAA,EAAI;IACR,MAAM;MAAEC,MAAM;MAAEgC;IAAS,CAAC,GAAG,IAAI,CAAC9B,KAAK;IAEvC,oBACEP,0DAAA;MAAKuC,SAAS,EAAC;IAAoB,gBACjCvC,0DAAA;MAAKuC,SAAS,EAAC;IAAY,gBACzBvC,0DAAA,CAACkB,eAAe;MACdsB,YAAY,EAAC,aAAa;MAC1BC,QAAQ,EAAC,uBAAuB;MAChClB,MAAM,EAAGmB,UAAU,KAAM;QAAEb,IAAI,EAAEa,UAAU,CAACb;MAAK,CAAC,CAAE;MACpDjB,KAAK,EAAEP,MAAM,CAACwB,IAAI,GAAGxB,MAAM,CAACwB,IAAI,CAACC,OAAO,GAAG,IAAK;MAChDO,QAAQ,EAAGM,QAAQ,IAAKN,QAAQ,CAAC;QAAE3B,GAAG,EAAEL,MAAM,CAACK,GAAG;QAAEmB,IAAI,EAAEc,QAAQ,CAACV,MAAM,GAAG,CAAC,GAAG;UAAEH,OAAO,EAAEa,QAAQ,CAAC,CAAC,CAAC,CAACb;QAAQ,CAAC,GAAG;MAAK,CAAC,CAAE;MAC3Hc,SAAS,EAAGC,UAAU,iBAAK7C,0DAAA,CAACmB,gBAAgB,CAAC2B,cAAc,EAAAC,qEAAA,KAAKF,UAAU;QAAEG,OAAO,EAAE;UAAE,GAAGH,UAAU,CAACG,OAAO;UAAEC,SAAS,EAAE,MAAM;UAAEC,QAAQ,EAAE;YAAEC,MAAM,EAAE9C,MAAM,CAAC8C;UAAO,CAAC;UAAEC,cAAc,EAAE;QAAM;MAAE,EAAE;IAAE,CACnM,CACE,CACF,CAAC;EAEV;AACF;;;;;;ACjEA;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACNwC;AACQ;AACZ;AAEpCnC,mEAAmB,CAAC;EAClBR,IAAI,EAAE,MAAM;EACZ8C,MAAM,EAAE,aAAa;EACrBC,WAAW,EAAE,aAAa;EAC1BC,OAAO,EAAE,uCAAuC;EAChDC,kBAAkB,EAAE;AACtB,CAAC,CAAC;AAEFzC,6EAA6B,CAACoC,0DAAc,CAACzB,KAAK,EAAEyB,0DAAc,EAAGhD,MAAM,IAAKA,MAAM,CAACoB,WAAW,KAAK,WAAW,IAAIpB,MAAM,CAACoB,WAAW,KAAK,YAAY,CAAC;AAC1JR,yEAAyB,CAAC,MAAM,EAAEd,sDAAU,EAAE,CAAC0D,WAAW,EAAExD,MAAM,MAAM;EAAEQ,QAAQ,EAAEgD,WAAW,CAACxD,MAAM,CAACQ,QAAQ,EAAE,IAAI;AAAE,CAAC,CAAC,CAAC;AAE1HI,mEAAmB,CAAC8C,IAAI,CAAC,CAACC,OAAO,EAAE3C,QAAQ,KAAK;EAC9C,IAAI,CAAC2C,OAAO,CAACC,QAAQ,CAACpC,IAAI,IAAI,CAACmC,OAAO,CAACC,QAAQ,CAACpC,IAAI,CAACC,OAAO,EAAE;IAC5D;EACF;;EAEA;EACA,MAAMoC,WAAW,GAAGnD,MAAM,CAACO,IAAI,CAACD,QAAQ,CAAC,CAACK,GAAG,CAAEM,CAAC,IAAKX,QAAQ,CAACW,CAAC,CAAC,CAAC,CAC9DT,MAAM,CAAE4C,CAAC,IAAKA,CAAC,CAACrC,OAAO,KAAKkC,OAAO,CAACC,QAAQ,CAACpC,IAAI,CAACC,OAAO,IAAIqC,CAAC,CAAC1C,WAAW,KAAK,MAAM,KAAK0C,CAAC,CAACC,UAAU,IAAID,CAAC,CAACE,SAAS,IAAIF,CAAC,CAACG,OAAO,CAAC,CAAC;EAEvI,IAAI,CAACJ,WAAW,CAACjC,MAAM,EAAE;IACvB;EACF;EAEA+B,OAAO,CAACnC,IAAI,GAAGqC,WAAW,CAAC,CAAC,CAAC,CAACrD,QAAQ,IAAI0D,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,CAAC;AAC9D,CAAC,CAAC;AAEFvD,yEAAyB,CAAC8C,IAAI,CAAE1D,MAAM,IAAK;EACzC,IAAIA,MAAM,CAACoB,WAAW,KAAK,MAAM,IAAIpB,MAAM,CAACQ,QAAQ,IAAI,IAAI,EAAE;IAC5DR,MAAM,CAACQ,QAAQ,GAAG,IAAI;EACxB;AACF,CAAC,CAAC;AAEFI,0EAA0B,CAAC8C,IAAI,CAAE1D,MAAM,IAAK;EAC1C,IAAIA,MAAM,CAACoB,WAAW,KAAK,MAAM,IAAIpB,MAAM,CAACQ,QAAQ,IAAI,IAAI,EAAE;IAC5D,IAAI;MACF0D,IAAI,CAACI,KAAK,CAACtE,MAAM,CAACQ,QAAQ,CAAC;IAC7B,CAAC,CAAC,OAAOmB,CAAC,EAAE;MACVA,CAAC,CAAC4C,OAAO,GAAI,yDAAwD5C,CAAC,CAAC4C,OAAQ,EAAC;MAChF,MAAM5C,CAAC;IACT;EACF;AACF,CAAC,CAAC,C","sources":["webpack://@jsreport/jsreport-data/external var \"Studio\"","webpack://@jsreport/jsreport-data/external var \"Studio.libraries['react']\"","webpack://@jsreport/jsreport-data/./studio/DataEditor.js","webpack://@jsreport/jsreport-data/./studio/DataProperties.js","webpack://@jsreport/jsreport-data/external var \"Studio.runtime['helpers/extends']\"","webpack://@jsreport/jsreport-data/webpack/bootstrap","webpack://@jsreport/jsreport-data/webpack/runtime/compat get default export","webpack://@jsreport/jsreport-data/webpack/runtime/define property getters","webpack://@jsreport/jsreport-data/webpack/runtime/hasOwnProperty shorthand","webpack://@jsreport/jsreport-data/webpack/runtime/make namespace object","webpack://@jsreport/jsreport-data/./studio/main_dev.js"],"sourcesContent":["module.exports = Studio;","module.exports = Studio.libraries['react'];","import React, { Component } from 'react'\nimport { TextEditor } from 'jsreport-studio'\n\nclass DataEditor extends Component {\n  render () {\n    const { entity, onUpdate } = this.props\n\n    return (\n      <TextEditor\n        name={entity._id}\n        mode='json'\n        value={entity.dataJson || ''}\n        onUpdate={(v) => onUpdate(Object.assign({}, entity, { dataJson: v }))}\n      />\n    )\n  }\n}\n\nexport default DataEditor\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nconst EntityRefSelect = Studio.EntityRefSelect\nconst sharedComponents = Studio.sharedComponents\n\nfunction selectDataItems (entities) {\n  return Object.keys(entities).filter((k) => entities[k].__entitySet === 'data').map((k) => entities[k])\n}\n\nexport default class Properties extends Component {\n  static title (entity, entities) {\n    if (!entity.data || !entity.data.shortid) {\n      return 'data'\n    }\n\n    const foundItems = selectDataItems(entities).filter((e) => entity.data.shortid === e.shortid)\n\n    if (!foundItems.length) {\n      return 'data'\n    }\n\n    return 'sample data: ' + foundItems[0].name\n  }\n\n  componentDidMount () {\n    this.removeInvalidDataReferences()\n  }\n\n  componentDidUpdate () {\n    this.removeInvalidDataReferences()\n  }\n\n  removeInvalidDataReferences () {\n    const { entity, entities, onChange } = this.props\n\n    if (!entity.data) {\n      return\n    }\n\n    const updatedDataItems = Object.keys(entities).filter((k) => entities[k].__entitySet === 'data' && entities[k].shortid === entity.data.shortid)\n\n    if (updatedDataItems.length === 0) {\n      onChange({ _id: entity._id, data: null })\n    }\n  }\n\n  render () {\n    const { entity, onChange } = this.props\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'>\n          <EntityRefSelect\n            headingLabel='Select data'\n            newLabel='New data for template'\n            filter={(references) => ({ data: references.data })}\n            value={entity.data ? entity.data.shortid : null}\n            onChange={(selected) => onChange({ _id: entity._id, data: selected.length > 0 ? { shortid: selected[0].shortid } : null })}\n            renderNew={(modalProps) => <sharedComponents.NewEntityModal {...modalProps} options={{ ...modalProps.options, entitySet: 'data', defaults: { folder: entity.folder }, activateNewTab: false }} />}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","module.exports = Studio.runtime['helpers/extends'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import DataEditor from './DataEditor.js'\nimport DataProperties from './DataProperties.js'\nimport Studio from 'jsreport-studio'\n\nStudio.addEntitySet({\n  name: 'data',\n  faIcon: 'fa-database',\n  visibleName: 'sample data',\n  helpUrl: 'http://jsreport.net/learn/inline-data',\n  entityTreePosition: 900\n})\n\nStudio.addPropertiesComponent(DataProperties.title, DataProperties, (entity) => entity.__entitySet === 'templates' || entity.__entitySet === 'components')\nStudio.addEditorComponent('data', DataEditor, (reformatter, entity) => ({ dataJson: reformatter(entity.dataJson, 'js') }))\n\nStudio.runListeners.push((request, entities) => {\n  if (!request.template.data || !request.template.data.shortid) {\n    return\n  }\n\n  // try to fill request.data from the active open tab with sample data\n  const dataDetails = Object.keys(entities).map((e) => entities[e])\n    .filter((d) => d.shortid === request.template.data.shortid && d.__entitySet === 'data' && (d.__isLoaded || d.__isDirty || d.__isNew))\n\n  if (!dataDetails.length) {\n    return\n  }\n\n  request.data = dataDetails[0].dataJson || JSON.stringify({})\n})\n\nStudio.entityNewListeners.push((entity) => {\n  if (entity.__entitySet === 'data' && entity.dataJson == null) {\n    entity.dataJson = '{}'\n  }\n})\n\nStudio.entitySaveListeners.push((entity) => {\n  if (entity.__entitySet === 'data' && entity.dataJson != null) {\n    try {\n      JSON.parse(entity.dataJson)\n    } catch (e) {\n      e.message = `Error validating new data entity, Invalid JSON input. ${e.message}`\n      throw e\n    }\n  }\n})\n"],"names":["React","Component","TextEditor","DataEditor","render","entity","onUpdate","props","createElement","name","_id","mode","value","dataJson","v","Object","assign","Studio","EntityRefSelect","sharedComponents","selectDataItems","entities","keys","filter","k","__entitySet","map","Properties","title","data","shortid","foundItems","e","length","componentDidMount","removeInvalidDataReferences","componentDidUpdate","onChange","updatedDataItems","className","headingLabel","newLabel","references","selected","renderNew","modalProps","NewEntityModal","_extends","options","entitySet","defaults","folder","activateNewTab","DataProperties","addEntitySet","faIcon","visibleName","helpUrl","entityTreePosition","addPropertiesComponent","addEditorComponent","reformatter","runListeners","push","request","template","dataDetails","d","__isLoaded","__isDirty","__isNew","JSON","stringify","entityNewListeners","entitySaveListeners","parse","message"],"sourceRoot":""}