{"version":3,"file":"main.js","mappings":"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","sources":["webpack://@jsreport/jsreport-authentication/external var \"Studio\"","webpack://@jsreport/jsreport-authentication/external var \"Studio.libraries['react']\"","webpack://@jsreport/jsreport-authentication/./studio/ChangePasswordModal.js","webpack://@jsreport/jsreport-authentication/./studio/UserGroupsInfo.js","webpack://@jsreport/jsreport-authentication/./studio/UserEditor.js","webpack://@jsreport/jsreport-authentication/./studio/LogoutSettingsButton.js","webpack://@jsreport/jsreport-authentication/./studio/ChangePasswordSettingsButton.js","webpack://@jsreport/jsreport-authentication/./studio/ChangePasswordButton.js","webpack://@jsreport/jsreport-authentication/./studio/NewUserModal.js","webpack://@jsreport/jsreport-authentication/webpack/bootstrap","webpack://@jsreport/jsreport-authentication/webpack/runtime/compat get default export","webpack://@jsreport/jsreport-authentication/webpack/runtime/define property getters","webpack://@jsreport/jsreport-authentication/webpack/runtime/hasOwnProperty shorthand","webpack://@jsreport/jsreport-authentication/webpack/runtime/make namespace object","webpack://@jsreport/jsreport-authentication/./studio/main_dev.js"],"sourcesContent":["module.exports = Studio;","module.exports = Studio.libraries['react'];","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nclass ChangePasswordModal extends Component {\n  constructor (props) {\n    super(props)\n\n    this.oldPasswordRef = React.createRef()\n    this.newPassword1Ref = React.createRef()\n    this.newPassword2Ref = React.createRef()\n\n    this.state = {}\n  }\n\n  async changePassword () {\n    const { entity } = this.props.options\n    const { close } = this.props\n\n    try {\n      const data = {\n        newPassword: this.newPassword1Ref.current.value\n      }\n\n      if (this.needsOldPassword(entity)) {\n        data.oldPassword = this.oldPasswordRef.current.value\n      }\n\n      await Studio.api.post(`/api/users/${entity.shortid}/password`, { data: data })\n      this.newPassword1Ref.current.value = ''\n      this.newPassword2Ref.current.value = ''\n      close()\n    } catch (e) {\n      this.setState({ apiError: e.message })\n    }\n  }\n\n  validatePassword () {\n    this.setState(\n      {\n        passwordError: this.newPassword2Ref.current.value && this.newPassword2Ref.current.value !== this.newPassword1Ref.current.value,\n        apiError: null\n      })\n  }\n\n  needsOldPassword (entity) {\n    let needsOldPassword = true\n\n    if (Studio.authentication.isUserAdmin(Studio.authentication.user)) {\n      needsOldPassword = Studio.authentication.user.isGroup ? false : entity.name === Studio.authentication.user.name\n    }\n\n    return needsOldPassword\n  }\n\n  render () {\n    const { entity } = this.props.options\n\n    return (\n      <div>\n        {this.needsOldPassword(entity)\n          ? <div className='form-group'><label>old password</label><input type='password' autoComplete='off' ref={this.oldPasswordRef} /></div>\n          : ''}\n        <div className='form-group'>\n          <label>new password</label>\n          <input type='password' autoComplete='off' ref={this.newPassword1Ref} />\n        </div>\n        <div className='form-group'>\n          <label>new password verification</label>\n          <input type='password' autoComplete='off' ref={this.newPassword2Ref} onChange={() => this.validatePassword()} />\n        </div>\n        <div className='form-group'>\n          <span style={{ color: 'red', display: this.state.passwordError ? 'block' : 'none' }}>password doesn't match</span>\n          <span style={{ color: 'red', display: this.state.apiError ? 'block' : 'none' }}>{this.state.apiError}</span>\n        </div>\n        <div className='button-bar'>\n          <button className='button confirmation' onClick={() => this.changePassword()}>ok</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ChangePasswordModal\n","import { useCallback, useMemo } from 'react'\nimport Studio from 'jsreport-studio'\n\nfunction UserGroupsInfo (props) {\n  const { user } = props\n  const { usersGroups: groups } = Studio.getReferences()\n\n  const groupsForUser = useMemo(() => {\n    return groups.filter((g) => {\n      const users = g.users || []\n      return users.find((u) => u.shortid === user.shortid) != null\n    })\n  }, [groups])\n\n  return (\n    <div>\n      <h2>Groups</h2>\n      <div>\n        <div className='form-group'>\n          <GroupsDisplay groups={groupsForUser} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction GroupsDisplay ({ groups }) {\n  const handleOpenGroupTab = useCallback(function handleOpenGroupTab (groupId) {\n    Studio.openTab({ _id: groupId })\n  }, [])\n\n  if (groups.length === 0) {\n    return (\n      <span>\n        <i>No groups assigned</i>\n      </span>\n    )\n  }\n\n  const groupsIcon = 'fa-users'\n  const lastGroupIdx = groups.length - 1\n\n  return (\n    <span>\n      <i className={`fa ${groupsIcon}`} />\n      &nbsp;\n      {groups.map((g, idx) => (\n        <span key={g.name}>\n          <span\n            onClick={() => handleOpenGroupTab(g._id)}\n            style={{ textDecoration: 'underline', cursor: 'pointer' }}\n          >\n            {g.name}\n          </span>\n          {idx !== lastGroupIdx ? ', ' : ''}\n        </span>\n      ))}\n    </span>\n  )\n}\n\nexport default UserGroupsInfo\n","import React, { Component } from 'react'\nimport ChangePasswordModal from './ChangePasswordModal.js'\nimport Studio from 'jsreport-studio'\n\nclass UserEditor extends Component {\n  componentDidMount () {\n    if (this.props.entity.__isNew && !this.props.entity.password) {\n      Studio.openModal(ChangePasswordModal, { entity: this.props.entity })\n    }\n  }\n\n  render () {\n    const { entity, onUpdate } = this.props\n    const userIcon = Studio.resolveEntityTreeIconStyle(entity)\n    const isAdmin = Studio.authentication.isUserAdmin(entity)\n\n    return (\n      <div className='custom-editor'>\n        <h1><i className={`fa ${userIcon}`} /> {entity.name}</h1>\n        {isAdmin && (\n          <div>\n            <b>Admin user</b>\n          </div>\n        )}\n        <div>\n          {Studio.authentication.useEditorComponents.map((c, i) => <div key={i}>{c(entity, onUpdate)}</div>)}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default UserEditor\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nclass LogoutSettingsButton extends Component {\n  constructor (props) {\n    super(props)\n\n    this.logoutRef = React.createRef()\n  }\n\n  render () {\n    return (\n      <div>\n        <div\n          onClick={() => {\n            this.logoutRef.current.click()\n            this.props.closeMenu()\n          }}\n          style={{ cursor: 'pointer' }}\n        >\n          <form method='POST' action={Studio.resolveUrl('/logout')}>\n            <input ref={this.logoutRef} type='submit' id='logoutBtn' style={{ display: 'none' }} />\n          </form>\n          <i className='fa fa-power-off' />Logout\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default LogoutSettingsButton\n","import ChangePasswordModal from './ChangePasswordModal.js'\nimport Studio from 'jsreport-studio'\n\nconst ChangePasswordSettingsButton = (props) => {\n  if (Studio.authentication.user.isSuperAdmin || Studio.authentication.user.isGroup) {\n    return <span />\n  }\n\n  return (\n    <div>\n      <a\n        id='changePassword'\n        onClick={() => {\n          Studio.openModal(ChangePasswordModal, { entity: Studio.authentication.user })\n          props.closeMenu()\n        }}\n        style={{ cursor: 'pointer' }}\n      >\n        <i className='fa fa-key' />Change password\n      </a>\n    </div>\n  )\n}\n\nexport default ChangePasswordSettingsButton\n","import React, { Component } from 'react'\nimport ChangePasswordModal from './ChangePasswordModal.js'\nimport Studio from 'jsreport-studio'\n\nclass ChangePasswordButton extends Component {\n  render () {\n    if (\n      !this.props.tab ||\n      !this.props.tab.entity ||\n      this.props.tab.entity.__entitySet !== 'users' ||\n      // display change password always for super admin,\n      // and only if the current admin user opens its own user or a normal non-admin user\n      (\n        Studio.authentication.isUserAdmin(this.props.tab.entity) &&\n        (Studio.authentication.user.isGroup ||\n        this.props.tab.entity.name !== Studio.authentication.user.name) &&\n        !Studio.authentication.user.isSuperAdmin\n      )\n    ) {\n      return <span />\n    }\n\n    return (\n      <div>\n        <div\n          className='toolbar-button'\n          onClick={(e) => Studio.openModal(ChangePasswordModal, { entity: this.props.tab.entity })}\n        >\n          <i className='fa fa-key' />Change Password\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ChangePasswordButton\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nclass NewUserModal extends Component {\n  constructor () {\n    super()\n\n    this.usernameRef = React.createRef()\n    this.password1Ref = React.createRef()\n    this.password2Ref = React.createRef()\n\n    this.state = {}\n  }\n\n  componentDidMount () {\n    setTimeout(() => this.usernameRef.current.focus(), 0)\n  }\n\n  handleKeyPress (e) {\n    if (e.key === 'Enter') {\n      this.createUser()\n    }\n  }\n\n  async createUser () {\n    let entity = {}\n\n    if (this.props.options.defaults != null) {\n      entity = Object.assign(entity, this.props.options.defaults)\n    }\n\n    if (!this.usernameRef.current.value) {\n      return this.setState({ userNameError: true })\n    }\n\n    if (!this.password1Ref.current.value) {\n      return this.setState({ passwordError: true })\n    }\n\n    entity.name = this.usernameRef.current.value\n    entity.password = this.password1Ref.current.value\n\n    try {\n      const response = await Studio.api.post('/odata/users', {\n        data: entity\n      })\n\n      response.__entitySet = 'users'\n\n      Studio.addExistingEntity(response)\n\n      if (this.props.options.onNewEntity) {\n        this.props.options.onNewEntity(response)\n      }\n\n      this.props.close()\n    } catch (e) {\n      this.setState({ apiError: e.message })\n    }\n  }\n\n  validatePassword () {\n    this.setState(\n      {\n        passwordError: this.password2Ref.current.value && this.password2Ref.current.value !== this.password1Ref.current.value,\n        apiError: null\n      })\n  }\n\n  validateUsername () {\n    this.setState(\n      {\n        userNameError: this.usernameRef.current.value === '',\n        apiError: null\n      })\n  }\n\n  render () {\n    return (\n      <div>\n        <div className='form-group'>\n          <label>New user</label>\n        </div>\n        <div className='form-group'>\n          <label>username</label>\n          <input type='text' ref={this.usernameRef} onChange={() => this.validateUsername()} onKeyPress={(e) => this.handleKeyPress(e)} />\n        </div>\n        <div className='form-group'>\n          <label>password</label>\n          <input type='password' autoComplete='off' ref={this.password1Ref} />\n        </div>\n        <div className='form-group'>\n          <label>password verification</label>\n          <input type='password' autoComplete='off' ref={this.password2Ref} onChange={() => this.validatePassword()} />\n        </div>\n        <div className='form-group'>\n          <span style={{ color: 'red', display: this.state.passwordError ? 'block' : 'none' }}>password doesn't match</span>\n          <span\n            style={{ color: 'red', display: this.state.userNameError ? 'block' : 'none' }}\n          >username must be filled\n          </span>\n          <span style={{ color: 'red', display: this.state.apiError ? 'block' : 'none' }}>{this.state.apiError}</span>\n        </div>\n        <div className='button-bar'>\n          <button className='button confirmation' onClick={() => this.createUser()}>ok</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default NewUserModal\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Studio from 'jsreport-studio'\nimport UserGroupsInfo from './UserGroupsInfo'\nimport UserEditor from './UserEditor.js'\nimport LogoutSettingsButton from './LogoutSettingsButton.js'\nimport ChangePasswordSettingsButton from './ChangePasswordSettingsButton.js'\nimport ChangePasswordButton from './ChangePasswordButton.js'\nimport NewUserModal from './NewUserModal.js'\n\nStudio.sharedComponents.NewUserModal = NewUserModal\n\n// we want to be at the front, because other extension like scheduling relies on loaded user\nStudio.initializeListeners.unshift(async () => {\n  const response = await Studio.api.get('/api/settings')\n\n  if (!response.tenant) {\n    // authentication not enabled in config\n    return\n  }\n\n  const isTenantAdmin = response.isTenantAdmin === true\n\n  Studio.authentication = {\n    user: response.tenant,\n    useEditorComponents: [],\n    isUserAdmin: (userInfo) => {\n      if (userInfo == null) {\n        return false\n      }\n\n      if (userInfo.isSuperAdmin) {\n        return true\n      }\n\n      const isGroup = userInfo.isGroup === true || userInfo.__entitySet === 'usersGroups'\n\n      const { users, usersGroups: groups } = Studio.getReferences()\n\n      const validateUserInfoProps = (data, props) => {\n        let currentProp\n\n        for (const targetProp of props) {\n          if (data[targetProp] == null || data[targetProp] === '') {\n            continue\n          }\n\n          currentProp = targetProp\n          break\n        }\n\n        if (currentProp == null) {\n          const propsLabel = props.map((p) => '.' + p).join(', ')\n          throw new Error(`Studio.authentication.isUserAdmin needs to have one of these ${propsLabel} properties on the user info param`)\n        }\n\n        return currentProp\n      }\n\n      if (users == null || groups == null) {\n        const targetProp = isGroup ? '_id' : 'name'\n\n        validateUserInfoProps(userInfo, [targetProp])\n\n        // when we are checking the current user we return the result of isTenantAdmin\n        // which comes from server, this is useful when we call this check when the entitySets\n        // are not yet registered\n        if (userInfo[targetProp] === Studio.authentication.user[targetProp]) {\n          return isTenantAdmin\n        } else {\n          throw new Error('Could not find users or usersGroups entity sets')\n        }\n      }\n\n      const targetProp = validateUserInfoProps(userInfo, isGroup ? ['_id'] : ['_id', 'shortid', 'name'])\n\n      if (isGroup) {\n        const groupInStore = groups.find((u) => u[targetProp] === userInfo[targetProp])\n\n        if (groupInStore == null) {\n          return false\n        }\n\n        return groupInStore.isAdmin === true\n      } else {\n        const userInStore = users.find((u) => u[targetProp] === userInfo[targetProp])\n\n        if (userInStore == null) {\n          return false\n        }\n\n        if (userInStore.isAdmin) {\n          return true\n        }\n\n        const adminGroupsForUser = groups.filter((g) => {\n          const users = g.users || []\n          return g.isAdmin === true && users.find((u) => u.shortid === userInStore.shortid) != null\n        })\n\n        return adminGroupsForUser.length > 0\n      }\n    }\n  }\n\n  if (Studio.authentication.user.isSuperAdmin) {\n    Studio.authentication.useEditorComponents.push((user) => (\n      <div>\n        <h2>Admin Management</h2>\n        <div>\n          <div className='form-group'>\n            <label>Give admin privileges</label>\n            <input\n              type='checkbox'\n              checked={user.isAdmin === true}\n              onChange={(v) => Studio.updateEntity({ ...user, isAdmin: v.target.checked })}\n            />\n          </div>\n        </div>\n      </div>\n    ))\n  }\n\n  Studio.authentication.useEditorComponents.push((user) => (\n    <UserGroupsInfo user={user} />\n  ))\n\n  const userIcon = 'fa-user'\n\n  if (Studio.authentication.isUserAdmin(Studio.authentication.user)) {\n    Studio.addEntitySet({\n      name: 'users',\n      faIcon: userIcon,\n      visibleName: 'user',\n      referenceAttributes: ['isAdmin'],\n      onNew: (options) => Studio.openModal(NewUserModal, options),\n      entityTreePosition: 200\n    })\n\n    Studio.addEditorComponent('users', UserEditor)\n    Studio.addToolbarComponent(ChangePasswordButton)\n  }\n\n  Studio.entityTreeIconResolvers.push((entity) => {\n    if (entity.__entitySet === 'users') {\n      return Studio.authentication.isUserAdmin(entity) === true ? 'fa-user-gear' : userIcon\n    } else if (entity.__entitySet === 'usersGroups') {\n      return Studio.authentication.isUserAdmin(entity) === true ? 'fa-users-gear' : 'fa-users'\n    }\n  })\n\n  Studio.addToolbarComponent(ChangePasswordSettingsButton, 'settings')\n\n  Studio.addToolbarComponent(() => {\n    let faUserIcon\n\n    if (Studio.authentication.user.isGroup) {\n      faUserIcon = Studio.authentication.isUserAdmin(Studio.authentication.user) ? 'fa-users-gear' : 'fa-users'\n    } else {\n      faUserIcon = Studio.authentication.isUserAdmin(Studio.authentication.user) ? 'fa-user-gear' : userIcon\n    }\n\n    return (\n      <div className='toolbar-button'>\n        <span><i className={`fa ${faUserIcon}`} />{Studio.authentication.user.name}</span>\n      </div>\n    )\n  }, 'settingsBottom')\n\n  Studio.addToolbarComponent(LogoutSettingsButton, 'settingsBottom')\n})\n"],"names":["React","Component","Studio","ChangePasswordModal","constructor","props","oldPasswordRef","createRef","newPassword1Ref","newPassword2Ref","state","changePassword","entity","options","close","data","newPassword","current","value","needsOldPassword","oldPassword","api","post","shortid","e","setState","apiError","message","validatePassword","passwordError","authentication","isUserAdmin","user","isGroup","name","render","createElement","className","type","autoComplete","ref","onChange","style","color","display","onClick","useCallback","useMemo","UserGroupsInfo","usersGroups","groups","getReferences","groupsForUser","filter","g","users","find","u","GroupsDisplay","_ref","handleOpenGroupTab","groupId","openTab","_id","length","groupsIcon","lastGroupIdx","map","idx","key","textDecoration","cursor","UserEditor","componentDidMount","__isNew","password","openModal","onUpdate","userIcon","resolveEntityTreeIconStyle","isAdmin","useEditorComponents","c","i","LogoutSettingsButton","logoutRef","click","closeMenu","method","action","resolveUrl","id","ChangePasswordSettingsButton","isSuperAdmin","ChangePasswordButton","tab","__entitySet","NewUserModal","usernameRef","password1Ref","password2Ref","setTimeout","focus","handleKeyPress","createUser","defaults","Object","assign","userNameError","response","addExistingEntity","onNewEntity","validateUsername","onKeyPress","sharedComponents","initializeListeners","unshift","get","tenant","isTenantAdmin","userInfo","validateUserInfoProps","currentProp","targetProp","propsLabel","p","join","Error","groupInStore","userInStore","adminGroupsForUser","push","checked","v","updateEntity","target","addEntitySet","faIcon","visibleName","referenceAttributes","onNew","entityTreePosition","addEditorComponent","addToolbarComponent","entityTreeIconResolvers","faUserIcon"],"sourceRoot":""}