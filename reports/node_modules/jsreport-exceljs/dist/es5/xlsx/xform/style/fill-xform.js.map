{"version":3,"file":"fill-xform.js","names":["BaseXform","require","ColorXform","StopXform","map","color","xmlStream","model","openNode","addAttribute","position","render","closeNode","node","parser","parseOpen","name","parseFloat","attributes","parseClose","undefined","PatternFillXform","fgColor","bgColor","pattern","type","patternType","text","parseText","GradientFillXform","stop","gradient","degree","center","left","right","top","bottom","stopXform","stops","forEach","stopModel","parseInt","push","FillXform","patternFill","gradientFill","addRollback","rollback","commit","value","validPatternValues","reduce","p","v","module","exports"],"sources":["../../../../../lib/xlsx/xform/style/fill-xform.js"],"sourcesContent":["/* eslint-disable max-classes-per-file */\nconst BaseXform = require('../base-xform');\n\nconst ColorXform = require('./color-xform');\n\nclass StopXform extends BaseXform {\n  constructor() {\n    super();\n\n    this.map = {\n      color: new ColorXform(),\n    };\n  }\n\n  get tag() {\n    return 'stop';\n  }\n\n  render(xmlStream, model) {\n    xmlStream.openNode('stop');\n    xmlStream.addAttribute('position', model.position);\n    this.map.color.render(xmlStream, model.color);\n    xmlStream.closeNode();\n  }\n\n  parseOpen(node) {\n    if (this.parser) {\n      this.parser.parseOpen(node);\n      return true;\n    }\n    switch (node.name) {\n      case 'stop':\n        this.model = {\n          position: parseFloat(node.attributes.position),\n        };\n        return true;\n      case 'color':\n        this.parser = this.map.color;\n        this.parser.parseOpen(node);\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  parseText() {}\n\n  parseClose(name) {\n    if (this.parser) {\n      if (!this.parser.parseClose(name)) {\n        this.model.color = this.parser.model;\n        this.parser = undefined;\n      }\n      return true;\n    }\n    return false;\n  }\n}\n\nclass PatternFillXform extends BaseXform {\n  constructor() {\n    super();\n\n    this.map = {\n      fgColor: new ColorXform('fgColor'),\n      bgColor: new ColorXform('bgColor'),\n    };\n  }\n\n  get name() {\n    return 'pattern';\n  }\n\n  get tag() {\n    return 'patternFill';\n  }\n\n  render(xmlStream, model) {\n    xmlStream.openNode('patternFill');\n    xmlStream.addAttribute('patternType', model.pattern);\n    if (model.fgColor) {\n      this.map.fgColor.render(xmlStream, model.fgColor);\n    }\n    if (model.bgColor) {\n      this.map.bgColor.render(xmlStream, model.bgColor);\n    }\n    xmlStream.closeNode();\n  }\n\n  parseOpen(node) {\n    if (this.parser) {\n      this.parser.parseOpen(node);\n      return true;\n    }\n    switch (node.name) {\n      case 'patternFill':\n        this.model = {\n          type: 'pattern',\n          pattern: node.attributes.patternType,\n        };\n        return true;\n      default:\n        this.parser = this.map[node.name];\n        if (this.parser) {\n          this.parser.parseOpen(node);\n          return true;\n        }\n        return false;\n    }\n  }\n\n  parseText(text) {\n    if (this.parser) {\n      this.parser.parseText(text);\n    }\n  }\n\n  parseClose(name) {\n    if (this.parser) {\n      if (!this.parser.parseClose(name)) {\n        if (this.parser.model) {\n          this.model[name] = this.parser.model;\n        }\n        this.parser = undefined;\n      }\n      return true;\n    }\n    return false;\n  }\n}\n\nclass GradientFillXform extends BaseXform {\n  constructor() {\n    super();\n\n    this.map = {\n      stop: new StopXform(),\n    };\n    // if (model) {\n    //   this.gradient = model.gradient;\n    //   if (model.center) {\n    //     this.center = model.center;\n    //   }\n    //   if (model.degree !== undefined) {\n    //     this.degree = model.degree;\n    //   }\n    //   this.stops = model.stops.map(function(stop) { return new StopXform(stop); });\n    // } else {\n    //   this.stops = [];\n    // }\n  }\n\n  get name() {\n    return 'gradient';\n  }\n\n  get tag() {\n    return 'gradientFill';\n  }\n\n  render(xmlStream, model) {\n    xmlStream.openNode('gradientFill');\n    switch (model.gradient) {\n      case 'angle':\n        xmlStream.addAttribute('degree', model.degree);\n        break;\n      case 'path':\n        xmlStream.addAttribute('type', 'path');\n        if (model.center.left) {\n          xmlStream.addAttribute('left', model.center.left);\n          if (model.center.right === undefined) {\n            xmlStream.addAttribute('right', model.center.left);\n          }\n        }\n        if (model.center.right) {\n          xmlStream.addAttribute('right', model.center.right);\n        }\n        if (model.center.top) {\n          xmlStream.addAttribute('top', model.center.top);\n          if (model.center.bottom === undefined) {\n            xmlStream.addAttribute('bottom', model.center.top);\n          }\n        }\n        if (model.center.bottom) {\n          xmlStream.addAttribute('bottom', model.center.bottom);\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    const stopXform = this.map.stop;\n    model.stops.forEach(stopModel => {\n      stopXform.render(xmlStream, stopModel);\n    });\n\n    xmlStream.closeNode();\n  }\n\n  parseOpen(node) {\n    if (this.parser) {\n      this.parser.parseOpen(node);\n      return true;\n    }\n    switch (node.name) {\n      case 'gradientFill': {\n        const model = (this.model = {\n          stops: [],\n        });\n        if (node.attributes.degree) {\n          model.gradient = 'angle';\n          model.degree = parseInt(node.attributes.degree, 10);\n        } else if (node.attributes.type === 'path') {\n          model.gradient = 'path';\n          model.center = {\n            left: node.attributes.left ? parseFloat(node.attributes.left) : 0,\n            top: node.attributes.top ? parseFloat(node.attributes.top) : 0,\n          };\n          if (node.attributes.right !== node.attributes.left) {\n            model.center.right = node.attributes.right ? parseFloat(node.attributes.right) : 0;\n          }\n          if (node.attributes.bottom !== node.attributes.top) {\n            model.center.bottom = node.attributes.bottom ? parseFloat(node.attributes.bottom) : 0;\n          }\n        }\n        return true;\n      }\n\n      case 'stop':\n        this.parser = this.map.stop;\n        this.parser.parseOpen(node);\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  parseText(text) {\n    if (this.parser) {\n      this.parser.parseText(text);\n    }\n  }\n\n  parseClose(name) {\n    if (this.parser) {\n      if (!this.parser.parseClose(name)) {\n        this.model.stops.push(this.parser.model);\n        this.parser = undefined;\n      }\n      return true;\n    }\n    return false;\n  }\n}\n\n// Fill encapsulates translation from fill model to/from xlsx\nclass FillXform extends BaseXform{\n  constructor() {\n    super();\n\n    this.map = {\n      patternFill: new PatternFillXform(),\n      gradientFill: new GradientFillXform(),\n    };\n  }\n\n  get tag() {\n    return 'fill';\n  }\n\n  render(xmlStream, model) {\n    xmlStream.addRollback();\n    xmlStream.openNode('fill');\n    switch (model.type) {\n      case 'pattern':\n        this.map.patternFill.render(xmlStream, model);\n        break;\n      case 'gradient':\n        this.map.gradientFill.render(xmlStream, model);\n        break;\n      default:\n        xmlStream.rollback();\n        return;\n    }\n    xmlStream.closeNode();\n    xmlStream.commit();\n  }\n\n  parseOpen(node) {\n    if (this.parser) {\n      this.parser.parseOpen(node);\n      return true;\n    }\n    switch (node.name) {\n      case 'fill':\n        this.model = {};\n        return true;\n      default:\n        this.parser = this.map[node.name];\n        if (this.parser) {\n          this.parser.parseOpen(node);\n          return true;\n        }\n        return false;\n    }\n  }\n\n  parseText(text) {\n    if (this.parser) {\n      this.parser.parseText(text);\n    }\n  }\n\n  parseClose(name) {\n    if (this.parser) {\n      if (!this.parser.parseClose(name)) {\n        this.model = this.parser.model;\n        this.model.type = this.parser.name;\n        this.parser = undefined;\n      }\n      return true;\n    }\n    return false;\n  }\n\n\n  validStyle(value) {\n    return FillXform.validPatternValues[value];\n  }\n}\n\nFillXform.validPatternValues = [\n  'none',\n  'solid',\n  'darkVertical',\n  'darkGray',\n  'mediumGray',\n  'lightGray',\n  'gray125',\n  'gray0625',\n  'darkHorizontal',\n  'darkVertical',\n  'darkDown',\n  'darkUp',\n  'darkGrid',\n  'darkTrellis',\n  'lightHorizontal',\n  'lightVertical',\n  'lightDown',\n  'lightUp',\n  'lightGrid',\n  'lightTrellis',\n  'lightGrid',\n].reduce((p, v) => {\n  p[v] = true;\n  return p;\n}, {});\n\nFillXform.StopXform = StopXform;\nFillXform.PatternFillXform = PatternFillXform;\nFillXform.GradientFillXform = GradientFillXform;\n\nmodule.exports = FillXform;\n"],"mappings":"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"}