{"version":3,"file":"composite-xform.js","names":["BaseXform","require","CompositeXform","node","parser","map","name","parseOpen","tag","model","createNewModel","text","parseText","parseClose","onParserClose","undefined","module","exports"],"sources":["../../../../lib/xlsx/xform/composite-xform.js"],"sourcesContent":["const BaseXform = require('./base-xform');\n\n/* 'virtual' methods used as a form of documentation */\n/* eslint-disable class-methods-use-this */\n\n// base class for xforms that are composed of other xforms\n// offers some default implementations\nclass CompositeXform extends BaseXform {\n  createNewModel(node) {\n    return {};\n  }\n\n  parseOpen(node) {\n    // Typical pattern for composite xform\n    this.parser = this.parser || this.map[node.name];\n    if (this.parser) {\n      this.parser.parseOpen(node);\n      return true;\n    }\n\n    if (node.name === this.tag) {\n      this.model = this.createNewModel(node);\n      return true;\n    }\n\n    return false;\n  }\n\n  parseText(text) {\n    // Default implementation. Send text to child parser\n    if (this.parser) {\n      this.parser.parseText(text);\n    }\n  }\n\n  onParserClose(name, parser) {\n    // parseClose has seen a child parser close\n    // now need to incorporate into this.model somehow\n    this.model[name] = parser.model;\n  }\n\n  parseClose(name) {\n    // Default implementation\n    if (this.parser) {\n      if (!this.parser.parseClose(name)) {\n        this.onParserClose(name, this.parser);\n        this.parser = undefined;\n      }\n      return true;\n    }\n\n    return (name !== this.tag);\n  }\n}\n\nmodule.exports = CompositeXform;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,cAAD,CAAzB;AAEA;;AACA;AAEA;AACA;;;IACMC,c;;;;;;;;;;;;;WACJ,wBAAeC,IAAf,EAAqB;MACnB,OAAO,EAAP;IACD;;;WAED,mBAAUA,IAAV,EAAgB;MACd;MACA,KAAKC,MAAL,GAAc,KAAKA,MAAL,IAAe,KAAKC,GAAL,CAASF,IAAI,CAACG,IAAd,CAA7B;;MACA,IAAI,KAAKF,MAAT,EAAiB;QACf,KAAKA,MAAL,CAAYG,SAAZ,CAAsBJ,IAAtB;QACA,OAAO,IAAP;MACD;;MAED,IAAIA,IAAI,CAACG,IAAL,KAAc,KAAKE,GAAvB,EAA4B;QAC1B,KAAKC,KAAL,GAAa,KAAKC,cAAL,CAAoBP,IAApB,CAAb;QACA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD;;;WAED,mBAAUQ,IAAV,EAAgB;MACd;MACA,IAAI,KAAKP,MAAT,EAAiB;QACf,KAAKA,MAAL,CAAYQ,SAAZ,CAAsBD,IAAtB;MACD;IACF;;;WAED,uBAAcL,IAAd,EAAoBF,MAApB,EAA4B;MAC1B;MACA;MACA,KAAKK,KAAL,CAAWH,IAAX,IAAmBF,MAAM,CAACK,KAA1B;IACD;;;WAED,oBAAWH,IAAX,EAAiB;MACf;MACA,IAAI,KAAKF,MAAT,EAAiB;QACf,IAAI,CAAC,KAAKA,MAAL,CAAYS,UAAZ,CAAuBP,IAAvB,CAAL,EAAmC;UACjC,KAAKQ,aAAL,CAAmBR,IAAnB,EAAyB,KAAKF,MAA9B;UACA,KAAKA,MAAL,GAAcW,SAAd;QACD;;QACD,OAAO,IAAP;MACD;;MAED,OAAQT,IAAI,KAAK,KAAKE,GAAtB;IACD;;;;EA7C0BR,S;;AAgD7BgB,MAAM,CAACC,OAAP,GAAiBf,cAAjB"}